"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

require("source-map-support/register");

var _lib = require("../../../lib");

var _fakeDriver = require("./fake-driver");

var _axios = _interopRequireDefault(require("axios"));

var _sinon = require("sinon");

var _httpStatusCodes = require("http-status-codes");

var _helpers = require("./helpers");

var _constants = require("../../../lib/constants");

var _helpers2 = require("../../helpers");

let port;
let baseUrl;
describe('Protocol', function () {
  let sandbox;
  beforeEach(function () {
    sandbox = (0, _sinon.createSandbox)();
  });
  afterEach(function () {
    sandbox.restore();
  });
  before(async function () {
    port = await (0, _helpers2.getTestPort)();
    baseUrl = `http://${_helpers2.TEST_HOST}:${port}`;
  });
  describe('direct to driver', function () {
    let d = new _fakeDriver.FakeDriver();
    it('should return response values directly from the driver', async function () {
      (await d.setUrl('http://google.com')).should.contain('google');
    });
  });
  describe('via express router', function () {
    let mjsonwpServer;
    let driver;
    before(async function () {
      driver = new _fakeDriver.FakeDriver();
      driver.sessionId = 'foo';
      mjsonwpServer = await (0, _lib.server)({
        routeConfiguringFunction: (0, _lib.routeConfiguringFunction)(driver),
        port
      });
    });
    after(async function () {
      await mjsonwpServer.close();
    });
    it('should proxy to driver and return valid jsonwp response', async function () {
      const {
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo/url`,
        method: 'POST',
        data: {
          url: 'http://google.com'
        }
      });
      data.should.eql({
        value: 'Navigated to: http://google.com',
        sessionId: 'foo'
      });
    });
    it('should assume requests without a Content-Type are json requests', async function () {
      const {
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo/url`,
        method: 'POST',
        data: {
          url: 'http://google.com'
        }
      });
      data.should.eql({
        value: 'Navigated to: http://google.com',
        sessionId: 'foo'
      });
    });
    it('should respond to x-www-form-urlencoded as well as json requests', async function () {
      const reqData = new URLSearchParams();
      reqData.set('url', 'http://google.com');
      const {
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo/url`,
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded'
        },
        method: 'POST',
        data: reqData.toString()
      });
      data.should.eql({
        value: 'Navigated to: http://google.com',
        sessionId: 'foo'
      });
    });
    it('should include url request parameters for methods to use - sessionid', async function () {
      const {
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo/back`,
        method: 'POST',
        data: {}
      });
      data.should.eql({
        value: 'foo',
        sessionId: 'foo'
      });
    });
    it('should include url request parameters for methods to use - elementid', async function () {
      const {
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo/element/bar/click`,
        method: 'POST',
        data: {}
      });
      data.value.should.eql(['bar', 'foo']);
    });
    it('should include url req params in the order: custom, element, session', async function () {
      const {
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo/element/bar/attribute/baz`
      });
      data.value.should.eql(['baz', 'bar', 'foo']);
    });
    it('should respond with 400 Bad Request if parameters missing', async function () {
      const {
        data,
        status
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo/url`,
        method: 'POST',
        data: {},
        validateStatus: null
      });
      status.should.equal(400);
      JSON.stringify(data).should.contain('url');
    });
    it('should reject requests with a badly formatted body and not crash', async function () {
      await (0, _axios.default)({
        url: `${baseUrl}/session/foo/url`,
        method: 'POST',
        data: 'oh hello'
      }).should.eventually.be.rejected;
      const {
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo/url`,
        method: 'POST',
        data: {
          url: 'http://google.com'
        }
      });
      data.should.eql({
        value: 'Navigated to: http://google.com',
        sessionId: 'foo'
      });
    });
    it('should get 404 for bad routes', async function () {
      await (0, _axios.default)({
        url: `${baseUrl}/blargimarg`
      }).should.eventually.be.rejectedWith(/404/);
    });
    it('4xx responses should have content-type of application/json', async function () {
      const {
        headers
      } = await (0, _axios.default)({
        url: `${baseUrl}/blargimargarita`,
        validateStatus: null
      });
      headers['content-type'].should.include('application/json');
    });
    it('should throw not yet implemented for unfilledout commands', async function () {
      const {
        status,
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo/element/bar/location`,
        validateStatus: null
      });
      status.should.equal(405);
      data.value.error.should.eql('unknown method');
      data.value.message.should.eql('Method has not yet been implemented');
      data.sessionId.should.eql('foo');
    });
    it('should throw not implemented for ignored commands', async function () {
      const {
        status,
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo/buttonup`,
        method: 'POST',
        validateStatus: null,
        data: {}
      });
      status.should.equal(405);
      data.value.error.should.eql('unknown method');
      data.value.message.should.eql('Method has not yet been implemented');
      data.sessionId.should.eql('foo');
    });
    it('should get 400 for bad parameters', async function () {
      await (0, _axios.default)({
        url: `${baseUrl}/session/foo/url`,
        method: 'POST',
        data: {}
      }).should.eventually.be.rejectedWith(/400/);
    });
    it('should ignore special extra payload params in the right contexts', async function () {
      await (0, _axios.default)({
        url: `${baseUrl}/session/foo/element/bar/value`,
        method: 'POST',
        data: {
          id: 'baz',
          sessionId: 'lol',
          value: ['a']
        }
      });
      await (0, _axios.default)({
        url: `${baseUrl}/session/foo/element/bar/value`,
        method: 'POST',
        data: {
          id: 'baz'
        }
      }).should.eventually.be.rejectedWith(/400/);
      await (0, _axios.default)({
        url: `${baseUrl}/session/foo/frame`,
        method: 'POST',
        data: {
          id: 'baz'
        }
      });
    });
    it('should return the correct error even if driver does not throw', async function () {
      const {
        status,
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo/appium/receive_async_response`,
        method: 'POST',
        data: {
          response: 'baz'
        },
        validateStatus: null
      });
      status.should.equal(500);
      data.value.error.should.eql('unknown error');
      data.value.message.should.eql('An unknown server-side error occurred while processing ' + 'the command. Original error: Mishandled Driver Error');
      data.sessionId.should.eql('foo');
    });
    describe('w3c sendkeys migration', function () {
      it('should accept value for sendkeys', async function () {
        const {
          data
        } = await (0, _axios.default)({
          url: `${baseUrl}/session/foo/element/bar/value`,
          method: 'POST',
          data: {
            value: 'text to type'
          }
        });
        data.value.should.eql(['text to type', 'bar']);
      });
      it('should accept text for sendkeys', async function () {
        const {
          data
        } = await (0, _axios.default)({
          url: `${baseUrl}/session/foo/element/bar/value`,
          method: 'POST',
          data: {
            text: 'text to type'
          }
        });
        data.value.should.eql(['text to type', 'bar']);
      });
      it('should accept value and text for sendkeys, and use value', async function () {
        const {
          data
        } = await (0, _axios.default)({
          url: `${baseUrl}/session/foo/element/bar/value`,
          method: 'POST',
          data: {
            value: 'text to type',
            text: 'text to ignore'
          }
        });
        data.value.should.eql(['text to type', 'bar']);
      });
    });
    describe('multiple sets of arguments', function () {
      describe('optional', function () {
        it('should allow moveto with element', async function () {
          const {
            data
          } = await (0, _axios.default)({
            url: `${baseUrl}/session/foo/moveto`,
            method: 'POST',
            data: {
              element: '3'
            }
          });
          data.value.should.eql(['3', null, null]);
        });
        it('should allow moveto with xoffset/yoffset', async function () {
          const {
            data
          } = await (0, _axios.default)({
            url: `${baseUrl}/session/foo/moveto`,
            method: 'POST',
            data: {
              xoffset: 42,
              yoffset: 17
            }
          });
          data.value.should.eql([null, 42, 17]);
        });
      });
      describe('required', function () {
        it('should allow removeApp with appId', async function () {
          const {
            data
          } = await (0, _axios.default)({
            url: `${baseUrl}/session/foo/appium/device/remove_app`,
            method: 'POST',
            data: {
              appId: 42
            }
          });
          data.value.should.eql(42);
        });
        it('should allow removeApp with bundleId', async function () {
          const {
            data
          } = await (0, _axios.default)({
            url: `${baseUrl}/session/foo/appium/device/remove_app`,
            method: 'POST',
            data: {
              bundleId: 42
            }
          });
          data.value.should.eql(42);
        });
      });
    });
    describe('default param wrap', function () {
      it('should wrap', async function () {
        const {
          data
        } = await (0, _axios.default)({
          url: `${baseUrl}/session/foo/touch/perform`,
          method: 'POST',
          data: [{
            'action': 'tap',
            'options': {
              'element': '3'
            }
          }]
        });
        data.value.should.deep.equal([[{
          'action': 'tap',
          'options': {
            'element': '3'
          }
        }], 'foo']);
      });
      it('should not wrap twice', async function () {
        const {
          data
        } = await (0, _axios.default)({
          url: `${baseUrl}/session/foo/touch/perform`,
          method: 'POST',
          data: {
            actions: [{
              'action': 'tap',
              'options': {
                'element': '3'
              }
            }]
          }
        });
        data.value.should.deep.equal([[{
          'action': 'tap',
          'options': {
            'element': '3'
          }
        }], 'foo']);
      });
    });
    describe('create sessions via HTTP endpoint', function () {
      let sessionId;
      beforeEach(function () {
        sessionId = null;
      });
      afterEach(async function () {
        if (sessionId) {
          await _axios.default.delete(`${baseUrl}/session/${sessionId}`);
        }
      });
      it('should not allow create session with desired caps (MJSONWP)', async function () {
        const desiredCapabilities = {
          a: 'b'
        };
        const {
          data
        } = await (0, _axios.default)({
          url: `${baseUrl}/session`,
          method: 'POST',
          data: {
            desiredCapabilities
          }
        });
        should.equal(data.value, null);
      });
      it('should fail to create session without capabilities', async function () {
        await (0, _axios.default)({
          url: `${baseUrl}/session`,
          method: 'POST',
          data: {}
        }).should.eventually.be.rejectedWith(/400/);
      });
      it('should allow create session with capabilities (W3C)', async function () {
        const w3cCapabilities = {
          alwaysMatch: {
            'appium:e': 'f'
          }
        };
        const {
          data
        } = await (0, _axios.default)({
          url: `${baseUrl}/session`,
          method: 'POST',
          data: {
            capabilities: w3cCapabilities
          }
        });
        should.not.exist(data.status);
        should.not.exist(data.sessionId);
        data.value.capabilities.should.eql(w3cCapabilities);
        data.value.sessionId.should.exist;
        sessionId = data.value.sessionId;
      });
      it('should raise an error if the driver does not support W3C yet', async function () {
        const createSessionStub = sandbox.stub(driver, 'createSession').callsFake(function (capabilities) {
          driver.sessionId = null;
          return _lib.BaseDriver.prototype.createSession.call(driver, capabilities);
        });

        try {
          await (0, _axios.default)({
            url: `${baseUrl}/session`,
            method: 'POST',
            data: {
              capabilities: {
                alwaysMatch: {
                  platformName: 'Fake',
                  'appium:deviceName': 'Fake'
                },
                firstMatch: [{}]
              }
            }
          }).should.eventually.be.rejectedWith(/500/);
        } finally {
          createSessionStub.restore();
        }
      });
      describe('w3c endpoints', function () {
        let sessionUrl;
        beforeEach(async function () {
          const {
            value
          } = (await (0, _axios.default)({
            url: `${baseUrl}/session`,
            method: 'POST',
            data: {
              capabilities: {
                alwaysMatch: {
                  platformName: 'Fake',
                  'appium:deviceName': 'Commodore 64'
                },
                firstMatch: [{}]
              }
            }
          })).data;
          sessionId = value.sessionId;
          sessionUrl = `${baseUrl}/session/${sessionId}`;
        });
        it(`should throw 400 Bad Parameters exception if the parameters are bad`, async function () {
          const {
            status,
            data
          } = await (0, _axios.default)({
            url: `${sessionUrl}/actions`,
            method: 'POST',
            validateStatus: null,
            data: {
              bad: 'params'
            }
          });
          status.should.equal(400);
          const {
            error: w3cError,
            message,
            stacktrace
          } = data.value;
          message.should.match(/Parameters were incorrect/);
          stacktrace.should.match(/protocol.js/);
          w3cError.should.be.a.string;
          w3cError.should.equal(_lib.errors.InvalidArgumentError.error());
        });
        it(`should throw 405 exception if the command hasn't been implemented yet`, async function () {
          const {
            status,
            data
          } = await (0, _axios.default)({
            url: `${sessionUrl}/actions`,
            method: 'POST',
            validateStatus: null,
            data: {
              actions: []
            }
          });
          status.should.equal(405);
          const {
            error: w3cError,
            message,
            stacktrace
          } = data.value;
          message.should.match(/Method has not yet been implemented/);
          stacktrace.should.match(/protocol.js/);
          w3cError.should.be.a.string;
          w3cError.should.equal(_lib.errors.NotYetImplementedError.error());
          message.should.match(/Method has not yet been implemented/);
        });
        it(`should throw 500 Unknown Error if the command throws an unexpected exception`, async function () {
          driver.performActions = () => {
            throw new Error(`Didn't work`);
          };

          const {
            status,
            data
          } = await (0, _axios.default)({
            url: `${sessionUrl}/actions`,
            method: 'POST',
            validateStatus: null,
            data: {
              actions: []
            }
          });
          status.should.equal(500);
          const {
            error: w3cError,
            message,
            stacktrace
          } = data.value;
          stacktrace.should.match(/protocol.js/);
          w3cError.should.be.a.string;
          w3cError.should.equal(_lib.errors.UnknownError.error());
          message.should.match(/Didn't work/);
          delete driver.performActions;
        });
        it(`should translate element format from MJSONWP to W3C`, async function () {
          const retValue = [{
            something: {
              [_constants.MJSONWP_ELEMENT_KEY]: 'fooo',
              other: 'bar'
            }
          }, {
            [_constants.MJSONWP_ELEMENT_KEY]: 'bar'
          }, 'ignore'];
          const expectedValue = [{
            something: {
              [_constants.MJSONWP_ELEMENT_KEY]: 'fooo',
              [_constants.W3C_ELEMENT_KEY]: 'fooo',
              other: 'bar'
            }
          }, {
            [_constants.MJSONWP_ELEMENT_KEY]: 'bar',
            [_constants.W3C_ELEMENT_KEY]: 'bar'
          }, 'ignore'];
          const findElementsBackup = driver.findElements;

          driver.findElements = () => retValue;

          const {
            data
          } = await _axios.default.post(`${sessionUrl}/elements`, {
            using: 'whatever',
            value: 'whatever'
          });
          data.value.should.eql(expectedValue);
          driver.findElements = findElementsBackup;
        });
        it(`should fail with a 408 error if it throws a TimeoutError exception`, async function () {
          let setUrlStub = sandbox.stub(driver, 'setUrl').callsFake(function () {
            throw new _lib.errors.TimeoutError();
          });
          const {
            status,
            data
          } = await (0, _axios.default)({
            url: `${sessionUrl}/url`,
            method: 'POST',
            validateStatus: null,
            data: {
              url: 'https://example.com/'
            }
          });
          status.should.equal(408);
          const {
            error: w3cError,
            message,
            stacktrace
          } = data.value;
          stacktrace.should.match(/protocol.js/);
          w3cError.should.be.a.string;
          w3cError.should.equal(_lib.errors.TimeoutError.error());
          message.should.match(/An operation did not complete before its timeout expired/);
          setUrlStub.restore();
        });
        it(`should pass with 200 HTTP status code if the command returns a value`, async function () {
          driver.performActions = actions => 'It works ' + actions.join('');

          const {
            status,
            value,
            sessionId
          } = (await _axios.default.post(`${sessionUrl}/actions`, {
            actions: ['a', 'b', 'c']
          })).data;
          should.not.exist(sessionId);
          should.not.exist(status);
          value.should.equal('It works abc');
          delete driver.performActions;
        });
        describe('jwproxy', function () {
          let port;
          let server, jwproxy, app;
          before(async function () {
            port = await (0, _helpers2.getTestPort)(true);
          });
          beforeEach(function () {
            const res = (0, _helpers.createProxyServer)(sessionId, port);
            server = res.server;
            app = res.app;
            jwproxy = new _lib.JWProxy({
              host: _helpers2.TEST_HOST,
              port
            });
            jwproxy.sessionId = sessionId;

            driver.performActions = async actions => await jwproxy.command('/perform-actions', 'POST', actions);
          });
          afterEach(async function () {
            delete driver.performActions;
            await server.close();
          });
          it('should work if a proxied request returns a response with status 200', async function () {
            app.post('/session/:sessionId/perform-actions', (req, res) => {
              res.json({
                sessionId: req.params.sessionId,
                value: req.body,
                status: 0
              });
            });
            const {
              status,
              value,
              sessionId
            } = (await _axios.default.post(`${sessionUrl}/actions`, {
              actions: [1, 2, 3]
            })).data;
            value.should.eql([1, 2, 3]);
            should.not.exist(status);
            should.not.exist(sessionId);
          });
          it('should return error if a proxied request returns a MJSONWP error response', async function () {
            app.post('/session/:sessionId/perform-actions', (req, res) => {
              res.status(500).json({
                sessionId,
                status: 6,
                value: 'A problem occurred'
              });
            });
            const {
              status,
              data
            } = await (0, _axios.default)({
              url: `${sessionUrl}/actions`,
              method: 'POST',
              validateStatus: null,
              data: {
                actions: [1, 2, 3]
              }
            });
            status.should.equal(_httpStatusCodes.StatusCodes.NOT_FOUND);
            JSON.stringify(data).should.match(/A problem occurred/);
          });
          it('should return W3C error if a proxied request returns a W3C error response', async function () {
            const error = new Error(`Some error occurred`);
            error.w3cStatus = 414;
            const executeCommandStub = sandbox.stub(driver, 'executeCommand').returns({
              protocol: 'W3C',
              error
            });
            const {
              status,
              data
            } = await (0, _axios.default)({
              url: `${sessionUrl}/actions`,
              method: 'POST',
              validateStatus: null,
              data: {
                actions: [1, 2, 3]
              }
            });
            status.should.equal(414);
            const {
              error: w3cError,
              message: errMessage,
              stacktrace
            } = data.value;
            w3cError.should.equal('unknown error');
            stacktrace.should.match(/Some error occurred/);
            errMessage.should.equal('Some error occurred');
            executeCommandStub.restore();
          });
          it('should return error if a proxied request returns a MJSONWP error response but HTTP status code is 200', async function () {
            app.post('/session/:sessionId/perform-actions', (req, res) => {
              res.status(200).json({
                sessionId: 'Fake Session Id',
                status: 7,
                value: 'A problem occurred'
              });
            });
            const {
              status,
              data
            } = await (0, _axios.default)({
              url: `${sessionUrl}/actions`,
              method: 'POST',
              validateStatus: null,
              data: {
                actions: [1, 2, 3]
              }
            });
            status.should.equal(_httpStatusCodes.StatusCodes.NOT_FOUND);
            const {
              error: w3cError,
              message: errMessage,
              stacktrace
            } = data.value;
            w3cError.should.equal('no such element');
            errMessage.should.match(/A problem occurred/);
            stacktrace.should.exist;
          });
          it('should return error if a proxied request returns a W3C error response', async function () {
            app.post('/session/:sessionId/perform-actions', (req, res) => {
              res.status(404).json({
                value: {
                  error: 'no such element',
                  message: 'does not make a difference',
                  stacktrace: 'arbitrary stacktrace'
                }
              });
            });
            const {
              status,
              data
            } = await (0, _axios.default)({
              url: `${sessionUrl}/actions`,
              method: 'POST',
              validateStatus: null,
              data: {
                actions: [1, 2, 3]
              }
            });
            status.should.equal(_httpStatusCodes.StatusCodes.NOT_FOUND);
            const {
              error: w3cError,
              stacktrace
            } = data.value;
            w3cError.should.equal('no such element');
            stacktrace.should.match(/arbitrary stacktrace/);
          });
          it('should return an error if a proxied request returns a W3C error response', async function () {
            app.post('/session/:sessionId/perform-actions', (req, res) => {
              res.set('Connection', 'close');
              res.status(444).json({
                value: {
                  error: 'bogus error code',
                  message: 'does not make a difference',
                  stacktrace: 'arbitrary stacktrace'
                }
              });
            });
            const {
              status,
              data
            } = await (0, _axios.default)({
              url: `${sessionUrl}/actions`,
              method: 'POST',
              validateStatus: null,
              data: {
                actions: [1, 2, 3]
              }
            });
            status.should.equal(_httpStatusCodes.StatusCodes.INTERNAL_SERVER_ERROR);
            const {
              error: w3cError,
              stacktrace
            } = data.value;
            w3cError.should.equal('unknown error');
            stacktrace.should.match(/arbitrary stacktrace/);
          });
        });
      });
    });
    it('should handle commands with no response values', async function () {
      const {
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo/forward`,
        method: 'POST'
      });
      data.should.eql({
        value: null,
        sessionId: 'foo'
      });
    });
    it('should allow empty string response values', async function () {
      const {
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo/element/bar/text`
      });
      data.should.eql({
        value: '',
        sessionId: 'foo'
      });
    });
    it('should send 500 response and an Unknown object for rejected commands', async function () {
      const {
        status,
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo/refresh`,
        method: 'POST',
        validateStatus: null
      });
      status.should.equal(500);
      data.value.error.should.eql('unknown error');
      data.value.message.should.eql('An unknown server-side error occurred while processing ' + 'the command. Original error: Too Fresh!');
      data.sessionId.should.eql('foo');
    });
    it('should not throw UnknownError when known', async function () {
      const {
        status,
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/foo`,
        validateStatus: null
      });
      status.should.equal(404);
      data.value.error.should.eql('invalid session id');
      data.value.message.should.eql('A session is either terminated or not started');
      data.sessionId.should.eql('foo');
    });
  });
  describe('session Ids', function () {
    let driver = new _fakeDriver.FakeDriver();
    let mjsonwpServer;
    before(async function () {
      mjsonwpServer = await (0, _lib.server)({
        routeConfiguringFunction: (0, _lib.routeConfiguringFunction)(driver),
        port
      });
    });
    after(async function () {
      await mjsonwpServer.close();
    });
    afterEach(function () {
      driver.sessionId = null;
    });
    it('should return null SessionId for commands without sessionIds', async function () {
      const {
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/status`
      });
      should.equal(data.sessionId, null);
    });
    it('responds with the same session ID in the request', async function () {
      let sessionId = 'Vader Sessions';
      driver.sessionId = sessionId;
      const {
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/${sessionId}/url`,
        method: 'POST',
        data: {
          url: 'http://google.com'
        }
      });
      should.exist(data.sessionId);
      data.sessionId.should.eql(sessionId);
    });
    it('yells if no session exists', async function () {
      let sessionId = 'Vader Sessions';
      const {
        data,
        status
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/${sessionId}/url`,
        method: 'POST',
        validateStatus: null,
        data: {
          url: 'http://google.com'
        }
      });
      status.should.equal(404);
      data.value.message.should.contain('session');
    });
    it('yells if invalid session is sent', async function () {
      let sessionId = 'Vader Sessions';
      driver.sessionId = 'recession';
      const {
        data,
        status
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/${sessionId}/url`,
        method: 'POST',
        validateStatus: null,
        data: {
          url: 'http://google.com'
        }
      });
      status.should.equal(404);
      data.value.message.should.contain('session');
    });
    it('should have session IDs in error responses', async function () {
      let sessionId = 'Vader Sessions';
      driver.sessionId = sessionId;
      const {
        data,
        status
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/${sessionId}/refresh`,
        method: 'POST',
        validateStatus: null
      });
      status.should.equal(500);
      data.value.error.should.eql('unknown error');
      data.value.message.should.eql('An unknown server-side error occurred while processing ' + 'the command. Original error: Too Fresh!');
      data.sessionId.should.eql('Vader Sessions');
    });
    it('should return a new session ID on create', async function () {
      const {
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session`,
        method: 'POST',
        data: {
          capabilities: {
            alwaysMatch: {
              'appium:greeting': 'hello'
            },
            firstMatch: [{}]
          }
        }
      });
      should.exist(data.value.sessionId);
      data.value.sessionId.indexOf('fakeSession_').should.equal(0);
      data.value.capabilities.should.eql({
        alwaysMatch: {
          'appium:greeting': 'hello'
        },
        firstMatch: [{}]
      });
    });
  });
  describe('via drivers jsonwp proxy', function () {
    let driver;
    let sessionId = 'foo';
    let mjsonwpServer;
    beforeEach(async function () {
      driver = new _fakeDriver.FakeDriver();
      driver.sessionId = sessionId;

      driver.proxyActive = () => true;

      driver.canProxy = () => true;

      mjsonwpServer = await (0, _lib.server)({
        routeConfiguringFunction: (0, _lib.routeConfiguringFunction)(driver),
        port,
        extraMethodMap: _fakeDriver.FakeDriver.newMethodMap
      });
    });
    afterEach(async function () {
      await mjsonwpServer.close();
    });
    it('should give a nice error if proxying is set but no proxy function exists', async function () {
      driver.canProxy = () => false;

      const {
        status,
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/${sessionId}/url`,
        method: 'POST',
        validateStatus: null,
        data: {
          url: 'http://google.com'
        }
      });
      status.should.equal(500);
      data.value.error.should.eql('unknown error');
      data.value.message.should.eql('An unknown server-side error occurred while processing ' + 'the command. Original error: Trying to proxy to a ' + 'server but the driver is unable to proxy');
      data.sessionId.should.eql('foo');
    });
    it('should pass on any errors in proxying', async function () {
      driver.proxyReqRes = async function () {
        throw new Error('foo');
      };

      const {
        status,
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/${sessionId}/url`,
        method: 'POST',
        validateStatus: null,
        data: {
          url: 'http://google.com'
        }
      });
      status.should.equal(500);
      data.value.error.should.eql('unknown error');
      data.value.message.should.eql('An unknown server-side error occurred while processing ' + 'the command. Original error: Could not proxy. Proxy error: foo');
      data.sessionId.should.eql('foo');
    });
    it('should able to throw ProxyRequestError in proxying', async function () {
      driver.proxyReqRes = async function () {
        let jsonwp = {
          status: 35,
          value: 'No such context found.',
          sessionId: 'foo'
        };
        throw new _lib.errors.ProxyRequestError(`Could not proxy command to remote server. `, jsonwp);
      };

      const {
        status,
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/${sessionId}/url`,
        method: 'POST',
        validateStatus: null,
        data: {
          url: 'http://google.com'
        }
      });
      status.should.equal(400);
      data.value.error.should.eql('unknown error');
      data.value.message.should.eql('No such context found.');
      data.sessionId.should.eql('foo');
    });
    it('should let the proxy handle req/res', async function () {
      driver.proxyReqRes = async function (req, res) {
        res.status(200).json({
          custom: 'data'
        });
      };

      const {
        status,
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/${sessionId}/url`,
        method: 'POST',
        data: {
          url: 'http://google.com'
        }
      });
      status.should.equal(200);
      data.should.eql({
        custom: 'data'
      });
    });
    it('should avoid jsonwp proxying when path matches avoidance list', async function () {
      driver.getProxyAvoidList = () => [['POST', new RegExp('^/session/[^/]+/url$')]];

      const {
        status,
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/${sessionId}/url`,
        method: 'POST',
        data: {
          url: 'http://google.com'
        }
      });
      status.should.equal(200);
      data.should.eql({
        value: 'Navigated to: http://google.com',
        sessionId
      });
    });
    it('should fail if avoid proxy list is malformed in some way', async function () {
      async function badProxyAvoidanceList(list) {
        driver.getProxyAvoidList = () => list;

        const {
          status,
          data
        } = await (0, _axios.default)({
          url: `${baseUrl}/session/${sessionId}/url`,
          method: 'POST',
          validateStatus: null,
          data: {
            url: 'http://google.com'
          }
        });
        status.should.equal(500);
        data.value.message.should.contain('roxy');
      }

      const lists = ['foo', [['foo']], [['BAR', /lol/]], [['GET', 'foo']]];

      for (let list of lists) {
        await badProxyAvoidanceList(list);
      }
    });
    it('should avoid proxying non-session commands even if not in the list', async function () {
      driver.getProxyAvoidList = () => [['POST', new RegExp('')]];

      const {
        status,
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/status`
      });
      status.should.equal(200);
      data.should.eql({
        value: "I'm fine",
        sessionId: null
      });
    });
    it('should avoid proxying deleteSession commands', async function () {
      driver.getProxyAvoidList = () => [['POST', new RegExp('')]];

      driver.sessionId.should.equal(sessionId);
      const {
        status
      } = await _axios.default.delete(`${baseUrl}/session/${sessionId}`);
      status.should.equal(200);
      should.not.exist(driver.sessionId);
      driver.jwpProxyActive.should.be.false;
    });
    it('should avoid proxying when command spec specifies neverProxy', async function () {
      const {
        status,
        data
      } = await (0, _axios.default)({
        url: `${baseUrl}/session/${sessionId}/noproxy`,
        method: 'GET'
      });
      status.should.equal(200);
      data.should.eql({
        value: 'This was not proxied',
        sessionId
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Rlc3QvZTJlL3Byb3RvY29sL3Byb3RvY29sLmUyZS5zcGVjLmpzIl0sIm5hbWVzIjpbInBvcnQiLCJiYXNlVXJsIiwiZGVzY3JpYmUiLCJzYW5kYm94IiwiYmVmb3JlRWFjaCIsImFmdGVyRWFjaCIsInJlc3RvcmUiLCJiZWZvcmUiLCJURVNUX0hPU1QiLCJkIiwiRmFrZURyaXZlciIsIml0Iiwic2V0VXJsIiwic2hvdWxkIiwiY29udGFpbiIsIm1qc29ud3BTZXJ2ZXIiLCJkcml2ZXIiLCJzZXNzaW9uSWQiLCJyb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24iLCJhZnRlciIsImNsb3NlIiwiZGF0YSIsInVybCIsIm1ldGhvZCIsImVxbCIsInZhbHVlIiwicmVxRGF0YSIsIlVSTFNlYXJjaFBhcmFtcyIsInNldCIsImhlYWRlcnMiLCJ0b1N0cmluZyIsInN0YXR1cyIsInZhbGlkYXRlU3RhdHVzIiwiZXF1YWwiLCJKU09OIiwic3RyaW5naWZ5IiwiZXZlbnR1YWxseSIsImJlIiwicmVqZWN0ZWQiLCJyZWplY3RlZFdpdGgiLCJpbmNsdWRlIiwiZXJyb3IiLCJtZXNzYWdlIiwiaWQiLCJyZXNwb25zZSIsInRleHQiLCJlbGVtZW50IiwieG9mZnNldCIsInlvZmZzZXQiLCJhcHBJZCIsImJ1bmRsZUlkIiwiZGVlcCIsImFjdGlvbnMiLCJheGlvcyIsImRlbGV0ZSIsImRlc2lyZWRDYXBhYmlsaXRpZXMiLCJhIiwidzNjQ2FwYWJpbGl0aWVzIiwiYWx3YXlzTWF0Y2giLCJjYXBhYmlsaXRpZXMiLCJub3QiLCJleGlzdCIsImNyZWF0ZVNlc3Npb25TdHViIiwic3R1YiIsImNhbGxzRmFrZSIsIkJhc2VEcml2ZXIiLCJwcm90b3R5cGUiLCJjcmVhdGVTZXNzaW9uIiwiY2FsbCIsInBsYXRmb3JtTmFtZSIsImZpcnN0TWF0Y2giLCJzZXNzaW9uVXJsIiwiYmFkIiwidzNjRXJyb3IiLCJzdGFja3RyYWNlIiwibWF0Y2giLCJzdHJpbmciLCJlcnJvcnMiLCJJbnZhbGlkQXJndW1lbnRFcnJvciIsIk5vdFlldEltcGxlbWVudGVkRXJyb3IiLCJwZXJmb3JtQWN0aW9ucyIsIkVycm9yIiwiVW5rbm93bkVycm9yIiwicmV0VmFsdWUiLCJzb21ldGhpbmciLCJNSlNPTldQX0VMRU1FTlRfS0VZIiwib3RoZXIiLCJleHBlY3RlZFZhbHVlIiwiVzNDX0VMRU1FTlRfS0VZIiwiZmluZEVsZW1lbnRzQmFja3VwIiwiZmluZEVsZW1lbnRzIiwicG9zdCIsInVzaW5nIiwic2V0VXJsU3R1YiIsIlRpbWVvdXRFcnJvciIsImpvaW4iLCJzZXJ2ZXIiLCJqd3Byb3h5IiwiYXBwIiwicmVzIiwiSldQcm94eSIsImhvc3QiLCJjb21tYW5kIiwicmVxIiwianNvbiIsInBhcmFtcyIsImJvZHkiLCJIVFRQU3RhdHVzQ29kZXMiLCJOT1RfRk9VTkQiLCJ3M2NTdGF0dXMiLCJleGVjdXRlQ29tbWFuZFN0dWIiLCJyZXR1cm5zIiwicHJvdG9jb2wiLCJlcnJNZXNzYWdlIiwiSU5URVJOQUxfU0VSVkVSX0VSUk9SIiwiaW5kZXhPZiIsInByb3h5QWN0aXZlIiwiY2FuUHJveHkiLCJleHRyYU1ldGhvZE1hcCIsIm5ld01ldGhvZE1hcCIsInByb3h5UmVxUmVzIiwianNvbndwIiwiUHJveHlSZXF1ZXN0RXJyb3IiLCJjdXN0b20iLCJnZXRQcm94eUF2b2lkTGlzdCIsIlJlZ0V4cCIsImJhZFByb3h5QXZvaWRhbmNlTGlzdCIsImxpc3QiLCJsaXN0cyIsImp3cFByb3h5QWN0aXZlIiwiZmFsc2UiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUVBOztBQUdBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUdBOztBQUVBLElBQUlBLElBQUo7QUFDQSxJQUFJQyxPQUFKO0FBRUFDLFFBQVEsQ0FBQyxVQUFELEVBQWEsWUFBWTtBQUMvQixNQUFJQyxPQUFKO0FBRUFDLEVBQUFBLFVBQVUsQ0FBQyxZQUFZO0FBQ3JCRCxJQUFBQSxPQUFPLEdBQUcsMkJBQVY7QUFDRCxHQUZTLENB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QVgsQ0FBaUI3QyxNQUFNLENBQUNDLFNBQXhCO0FBQ0FELE1BQUFBLE1BQU0sQ0FBQ2lILGNBQVAsQ0FBc0JwSCxNQUF0QixDQUE2QndCLEVBQTdCLENBQWdDNkYsS0FBaEM7QUFDRCxLQVRDLENBQUY7QUFXQXZILElBQUFBLEVBQUUsQ0FBQyw4REFBRCxFQUFpRSxrQkFBa0I7QUFDbkYsWUFBTTtBQUFDb0IsUUFBQUEsTUFBRDtBQUFTVixRQUFBQTtBQUFULFVBQWlCLE1BQU0sb0JBQU07QUFDakNDLFFBQUFBLEdBQUcsRUFBRyxHQUFFckIsT0FBUSxZQUFXZ0IsU0FBVSxVQURKO0FBRWpDTSxRQUFBQSxNQUFNLEVBQUU7QUFGeUIsT0FBTixDQUE3QjtBQUtBUSxNQUFBQSxNQUFNLENBQUNsQixNQUFQLENBQWNvQixLQUFkLENBQW9CLEdBQXBCO0FBQ0FaLE1BQUFBLElBQUksQ0FBQ1IsTUFBTCxDQUFZVyxHQUFaLENBQWdCO0FBQ2RDLFFBQUFBLEtBQUssRUFBRSxzQkFETztBQUVkUixRQUFBQTtBQUZjLE9BQWhCO0FBSUQsS0FYQyxDQUFGO0FBYUQsR0F0S08sQ0FBUjtBQXVLRCxDQTErQk8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbIi8vIHRyYW5zcGlsZTptb2NoYVxuXG5pbXBvcnQge1xuICBzZXJ2ZXIsIHJvdXRlQ29uZmlndXJpbmdGdW5jdGlvbiwgZXJyb3JzLCBKV1Byb3h5LCBCYXNlRHJpdmVyXG59IGZyb20gJy4uLy4uLy4uL2xpYic7XG5pbXBvcnQgeyBGYWtlRHJpdmVyIH0gZnJvbSAnLi9mYWtlLWRyaXZlcic7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgY3JlYXRlU2FuZGJveCB9IGZyb20gJ3Npbm9uJztcbmltcG9ydCB7IFN0YXR1c0NvZGVzIGFzIEhUVFBTdGF0dXNDb2RlcyB9IGZyb20gJ2h0dHAtc3RhdHVzLWNvZGVzJztcbmltcG9ydCB7IGNyZWF0ZVByb3h5U2VydmVyIH0gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCB7XG4gIE1KU09OV1BfRUxFTUVOVF9LRVksIFczQ19FTEVNRU5UX0tFWVxufSBmcm9tICcuLi8uLi8uLi9saWIvY29uc3RhbnRzJztcbmltcG9ydCB7VEVTVF9IT1NULCBnZXRUZXN0UG9ydH0gZnJvbSAnLi4vLi4vaGVscGVycyc7XG5cbmxldCBwb3J0O1xubGV0IGJhc2VVcmw7XG5cbmRlc2NyaWJlKCdQcm90b2NvbCcsIGZ1bmN0aW9uICgpIHtcbiAgbGV0IHNhbmRib3g7XG5cbiAgYmVmb3JlRWFjaChmdW5jdGlvbiAoKSB7XG4gICAgc2FuZGJveCA9IGNyZWF0ZVNhbmRib3goKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICBzYW5kYm94LnJlc3RvcmUoKTtcbiAgfSk7XG5cbiAgYmVmb3JlKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBwb3J0ID0gYXdhaXQgZ2V0VGVzdFBvcnQoKTtcbiAgICBiYXNlVXJsID0gYGh0dHA6Ly8ke1RFU1RfSE9TVH06JHtwb3J0fWA7XG4gIH0pO1xuXG4gIC8vVE9ETzogbW9yZSB0ZXN0cyE6XG4gIC8vIFVua25vd24gY29tbWFuZHMgc2hvdWxkIHJldHVybiA0MDRcblxuICBkZXNjcmliZSgnZGlyZWN0IHRvIGRyaXZlcicsIGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgZCA9IG5ldyBGYWtlRHJpdmVyKCk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcmVzcG9uc2UgdmFsdWVzIGRpcmVjdGx5IGZyb20gdGhlIGRyaXZlcicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIChhd2FpdCBkLnNldFVybCgnaHR0cDovL2dvb2dsZS5jb20nKSkuc2hvdWxkLmNvbnRhaW4oJ2dvb2dsZScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndmlhIGV4cHJlc3Mgcm91dGVyJywgZnVuY3Rpb24gKCkge1xuICAgIGxldCBtanNvbndwU2VydmVyO1xuICAgIGxldCBkcml2ZXI7XG5cbiAgICBiZWZvcmUoYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyID0gbmV3IEZha2VEcml2ZXIoKTtcbiAgICAgIGRyaXZlci5zZXNzaW9uSWQgPSAnZm9vJztcbiAgICAgIG1qc29ud3BTZXJ2ZXIgPSBhd2FpdCBzZXJ2ZXIoe1xuICAgICAgICByb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb246IHJvdXRlQ29uZmlndXJpbmdGdW5jdGlvbihkcml2ZXIpLFxuICAgICAgICBwb3J0LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBhZnRlcihhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhd2FpdCBtanNvbndwU2VydmVyLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHByb3h5IHRvIGRyaXZlciBhbmQgcmV0dXJuIHZhbGlkIGpzb253cCByZXNwb25zZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby91cmxgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgZGF0YToge3VybDogJ2h0dHA6Ly9nb29nbGUuY29tJ31cbiAgICAgIH0pO1xuICAgICAgZGF0YS5zaG91bGQuZXFsKHtcbiAgICAgICAgdmFsdWU6ICdOYXZpZ2F0ZWQgdG86IGh0dHA6Ly9nb29nbGUuY29tJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnZm9vJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFzc3VtZSByZXF1ZXN0cyB3aXRob3V0IGEgQ29udGVudC1UeXBlIGFyZSBqc29uIHJlcXVlc3RzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL3VybGAsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBkYXRhOiB7dXJsOiAnaHR0cDovL2dvb2dsZS5jb20nfSxcbiAgICAgIH0pO1xuICAgICAgZGF0YS5zaG91bGQuZXFsKHtcbiAgICAgICAgdmFsdWU6ICdOYXZpZ2F0ZWQgdG86IGh0dHA6Ly9nb29nbGUuY29tJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnZm9vJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlc3BvbmQgdG8geC13d3ctZm9ybS11cmxlbmNvZGVkIGFzIHdlbGwgYXMganNvbiByZXF1ZXN0cycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHJlcURhdGEgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICByZXFEYXRhLnNldCgndXJsJywgJ2h0dHA6Ly9nb29nbGUuY29tJyk7XG4gICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi9mb28vdXJsYCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgfSxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGRhdGE6IHJlcURhdGEudG9TdHJpbmcoKSxcbiAgICAgIH0pO1xuICAgICAgZGF0YS5zaG91bGQuZXFsKHtcbiAgICAgICAgdmFsdWU6ICdOYXZpZ2F0ZWQgdG86IGh0dHA6Ly9nb29nbGUuY29tJyxcbiAgICAgICAgc2Vzc2lvbklkOiAnZm9vJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgdXJsIHJlcXVlc3QgcGFyYW1ldGVycyBmb3IgbWV0aG9kcyB0byB1c2UgLSBzZXNzaW9uaWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi9mb28vYmFja2AsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBkYXRhOiB7fSxcbiAgICAgIH0pO1xuICAgICAgZGF0YS5zaG91bGQuZXFsKHtcbiAgICAgICAgdmFsdWU6ICdmb28nLFxuICAgICAgICBzZXNzaW9uSWQ6ICdmb28nXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSB1cmwgcmVxdWVzdCBwYXJhbWV0ZXJzIGZvciBtZXRob2RzIHRvIHVzZSAtIGVsZW1lbnRpZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9lbGVtZW50L2Jhci9jbGlja2AsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBkYXRhOiB7fSxcbiAgICAgIH0pO1xuICAgICAgZGF0YS52YWx1ZS5zaG91bGQuZXFsKFsnYmFyJywgJ2ZvbyddKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSB1cmwgcmVxIHBhcmFtcyBpbiB0aGUgb3JkZXI6IGN1c3RvbSwgZWxlbWVudCwgc2Vzc2lvbicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9lbGVtZW50L2Jhci9hdHRyaWJ1dGUvYmF6YCxcbiAgICAgIH0pO1xuICAgICAgZGF0YS52YWx1ZS5zaG91bGQuZXFsKFsnYmF6JywgJ2JhcicsICdmb28nXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlc3BvbmQgd2l0aCA0MDAgQmFkIFJlcXVlc3QgaWYgcGFyYW1ldGVycyBtaXNzaW5nJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3Qge2RhdGEsIHN0YXR1c30gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi9mb28vdXJsYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGRhdGE6IHt9LFxuICAgICAgICB2YWxpZGF0ZVN0YXR1czogbnVsbCxcbiAgICAgIH0pO1xuICAgICAgc3RhdHVzLnNob3VsZC5lcXVhbCg0MDApO1xuICAgICAgSlNPTi5zdHJpbmdpZnkoZGF0YSkuc2hvdWxkLmNvbnRhaW4oJ3VybCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgcmVxdWVzdHMgd2l0aCBhIGJhZGx5IGZvcm1hdHRlZCBib2R5IGFuZCBub3QgY3Jhc2gnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhd2FpdCBheGlvcyh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi9mb28vdXJsYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGRhdGE6ICdvaCBoZWxsbydcbiAgICAgIH0pLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkO1xuXG4gICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi9mb28vdXJsYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGRhdGE6IHt1cmw6ICdodHRwOi8vZ29vZ2xlLmNvbSd9XG4gICAgICB9KTtcbiAgICAgIGRhdGEuc2hvdWxkLmVxbCh7XG4gICAgICAgIHZhbHVlOiAnTmF2aWdhdGVkIHRvOiBodHRwOi8vZ29vZ2xlLmNvbScsXG4gICAgICAgIHNlc3Npb25JZDogJ2ZvbydcbiAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdldCA0MDQgZm9yIGJhZCByb3V0ZXMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhd2FpdCBheGlvcyh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vYmxhcmdpbWFyZ2AsXG4gICAgICB9KS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoLzQwNC8pO1xuICAgIH0pO1xuXG4gICAgaXQoJzR4eCByZXNwb25zZXMgc2hvdWxkIGhhdmUgY29udGVudC10eXBlIG9mIGFwcGxpY2F0aW9uL2pzb24nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCB7aGVhZGVyc30gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vYmxhcmdpbWFyZ2FyaXRhYCxcbiAgICAgICAgdmFsaWRhdGVTdGF0dXM6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgaGVhZGVyc1snY29udGVudC10eXBlJ10uc2hvdWxkLmluY2x1ZGUoJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgbm90IHlldCBpbXBsZW1lbnRlZCBmb3IgdW5maWxsZWRvdXQgY29tbWFuZHMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCB7c3RhdHVzLCBkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9lbGVtZW50L2Jhci9sb2NhdGlvbmAsXG4gICAgICAgIHZhbGlkYXRlU3RhdHVzOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIHN0YXR1cy5zaG91bGQuZXF1YWwoNDA1KTtcbiAgICAgIGRhdGEudmFsdWUuZXJyb3Iuc2hvdWxkLmVxbCgndW5rbm93biBtZXRob2QnKTtcbiAgICAgIGRhdGEudmFsdWUubWVzc2FnZS5zaG91bGQuZXFsKCdNZXRob2QgaGFzIG5vdCB5ZXQgYmVlbiBpbXBsZW1lbnRlZCcpO1xuICAgICAgZGF0YS5zZXNzaW9uSWQuc2hvdWxkLmVxbCgnZm9vJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IG5vdCBpbXBsZW1lbnRlZCBmb3IgaWdub3JlZCBjb21tYW5kcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHtzdGF0dXMsIGRhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL2J1dHRvbnVwYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIHZhbGlkYXRlU3RhdHVzOiBudWxsLFxuICAgICAgICBkYXRhOiB7fSxcbiAgICAgIH0pO1xuXG4gICAgICBzdGF0dXMuc2hvdWxkLmVxdWFsKDQwNSk7XG4gICAgICBkYXRhLnZhbHVlLmVycm9yLnNob3VsZC5lcWwoJ3Vua25vd24gbWV0aG9kJyk7XG4gICAgICBkYXRhLnZhbHVlLm1lc3NhZ2Uuc2hvdWxkLmVxbCgnTWV0aG9kIGhhcyBub3QgeWV0IGJlZW4gaW1wbGVtZW50ZWQnKTtcbiAgICAgIGRhdGEuc2Vzc2lvbklkLnNob3VsZC5lcWwoJ2ZvbycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZXQgNDAwIGZvciBiYWQgcGFyYW1ldGVycycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGF3YWl0IGF4aW9zKHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby91cmxgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgZGF0YToge31cbiAgICAgIH0pLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvNDAwLyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGlnbm9yZSBzcGVjaWFsIGV4dHJhIHBheWxvYWQgcGFyYW1zIGluIHRoZSByaWdodCBjb250ZXh0cycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGF3YWl0IGF4aW9zKHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9lbGVtZW50L2Jhci92YWx1ZWAsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBkYXRhOiB7aWQ6ICdiYXonLCBzZXNzaW9uSWQ6ICdsb2wnLCB2YWx1ZTogWydhJ119XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYXhpb3Moe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL2VsZW1lbnQvYmFyL3ZhbHVlYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGRhdGE6IHtpZDogJ2Jheid9XG4gICAgICB9KS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoLzQwMC8pO1xuXG4gICAgICAvLyBtYWtlIHN1cmUgYWRkaW5nIHRoZSBvcHRpb25hbCAnaWQnIGRvZXNuJ3QgY2xvYmJlciBhIHJvdXRlIHdoZXJlIHdlXG4gICAgICAvLyBoYXZlIGFuIGFjdHVhbCByZXF1aXJlZCAnaWQnXG4gICAgICBhd2FpdCBheGlvcyh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi9mb28vZnJhbWVgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgZGF0YToge2lkOiAnYmF6J31cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdGhlIGNvcnJlY3QgZXJyb3IgZXZlbiBpZiBkcml2ZXIgZG9lcyBub3QgdGhyb3cnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCB7c3RhdHVzLCBkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9hcHBpdW0vcmVjZWl2ZV9hc3luY19yZXNwb25zZWAsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBkYXRhOiB7cmVzcG9uc2U6ICdiYXonfSxcbiAgICAgICAgdmFsaWRhdGVTdGF0dXM6IG51bGwsXG4gICAgICB9KTtcbiAgICAgIHN0YXR1cy5zaG91bGQuZXF1YWwoNTAwKTtcbiAgICAgIGRhdGEudmFsdWUuZXJyb3Iuc2hvdWxkLmVxbCgndW5rbm93biBlcnJvcicpO1xuICAgICAgZGF0YS52YWx1ZS5tZXNzYWdlLnNob3VsZC5lcWwoJ0FuIHVua25vd24gc2VydmVyLXNpZGUgZXJyb3Igb2NjdXJyZWQgd2hpbGUgcHJvY2Vzc2luZyAnICtcbiAgICAgICAgJ3RoZSBjb21tYW5kLiBPcmlnaW5hbCBlcnJvcjogTWlzaGFuZGxlZCBEcml2ZXIgRXJyb3InKTtcbiAgICAgIGRhdGEuc2Vzc2lvbklkLnNob3VsZC5lcWwoJ2ZvbycpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3czYyBzZW5ka2V5cyBtaWdyYXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpdCgnc2hvdWxkIGFjY2VwdCB2YWx1ZSBmb3Igc2VuZGtleXMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL2VsZW1lbnQvYmFyL3ZhbHVlYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBkYXRhOiB7dmFsdWU6ICd0ZXh0IHRvIHR5cGUnfVxuICAgICAgICB9KTtcbiAgICAgICAgZGF0YS52YWx1ZS5zaG91bGQuZXFsKFsndGV4dCB0byB0eXBlJywgJ2JhciddKTtcbiAgICAgIH0pO1xuICAgICAgaXQoJ3Nob3VsZCBhY2NlcHQgdGV4dCBmb3Igc2VuZGtleXMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL2VsZW1lbnQvYmFyL3ZhbHVlYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBkYXRhOiB7dGV4dDogJ3RleHQgdG8gdHlwZSd9XG4gICAgICAgIH0pO1xuICAgICAgICBkYXRhLnZhbHVlLnNob3VsZC5lcWwoWyd0ZXh0IHRvIHR5cGUnLCAnYmFyJ10pO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIGFjY2VwdCB2YWx1ZSBhbmQgdGV4dCBmb3Igc2VuZGtleXMsIGFuZCB1c2UgdmFsdWUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL2VsZW1lbnQvYmFyL3ZhbHVlYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBkYXRhOiB7dmFsdWU6ICd0ZXh0IHRvIHR5cGUnLCB0ZXh0OiAndGV4dCB0byBpZ25vcmUnfVxuICAgICAgICB9KTtcbiAgICAgICAgZGF0YS52YWx1ZS5zaG91bGQuZXFsKFsndGV4dCB0byB0eXBlJywgJ2JhciddKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ211bHRpcGxlIHNldHMgb2YgYXJndW1lbnRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgZGVzY3JpYmUoJ29wdGlvbmFsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpdCgnc2hvdWxkIGFsbG93IG1vdmV0byB3aXRoIGVsZW1lbnQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9tb3ZldG9gLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7ZWxlbWVudDogJzMnfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRhdGEudmFsdWUuc2hvdWxkLmVxbChbJzMnLCBudWxsLCBudWxsXSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdCgnc2hvdWxkIGFsbG93IG1vdmV0byB3aXRoIHhvZmZzZXQveW9mZnNldCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL21vdmV0b2AsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHt4b2Zmc2V0OiA0MiwgeW9mZnNldDogMTd9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGF0YS52YWx1ZS5zaG91bGQuZXFsKFtudWxsLCA0MiwgMTddKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGRlc2NyaWJlKCdyZXF1aXJlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaXQoJ3Nob3VsZCBhbGxvdyByZW1vdmVBcHAgd2l0aCBhcHBJZCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL2FwcGl1bS9kZXZpY2UvcmVtb3ZlX2FwcGAsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IHthcHBJZDogNDJ9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGF0YS52YWx1ZS5zaG91bGQuZXFsKDQyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KCdzaG91bGQgYWxsb3cgcmVtb3ZlQXBwIHdpdGggYnVuZGxlSWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9hcHBpdW0vZGV2aWNlL3JlbW92ZV9hcHBgLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7YnVuZGxlSWQ6IDQyfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRhdGEudmFsdWUuc2hvdWxkLmVxbCg0Mik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZGVmYXVsdCBwYXJhbSB3cmFwJywgZnVuY3Rpb24gKCkge1xuICAgICAgaXQoJ3Nob3VsZCB3cmFwJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby90b3VjaC9wZXJmb3JtYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBkYXRhOiBbeydhY3Rpb24nOiAndGFwJywgJ29wdGlvbnMnOiB7J2VsZW1lbnQnOiAnMyd9fV1cbiAgICAgICAgfSk7XG4gICAgICAgIGRhdGEudmFsdWUuc2hvdWxkLmRlZXAuZXF1YWwoW1t7J2FjdGlvbic6ICd0YXAnLCAnb3B0aW9ucyc6IHsnZWxlbWVudCc6ICczJ319XSwgJ2ZvbyddKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIG5vdCB3cmFwIHR3aWNlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby90b3VjaC9wZXJmb3JtYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBkYXRhOiB7YWN0aW9uczogW3snYWN0aW9uJzogJ3RhcCcsICdvcHRpb25zJzogeydlbGVtZW50JzogJzMnfX1dfVxuICAgICAgICB9KTtcbiAgICAgICAgZGF0YS52YWx1ZS5zaG91bGQuZGVlcC5lcXVhbChbW3snYWN0aW9uJzogJ3RhcCcsICdvcHRpb25zJzogeydlbGVtZW50JzogJzMnfX1dLCAnZm9vJ10pO1xuICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdjcmVhdGUgc2Vzc2lvbnMgdmlhIEhUVFAgZW5kcG9pbnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgc2Vzc2lvbklkO1xuXG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2Vzc2lvbklkID0gbnVsbDtcbiAgICAgIH0pO1xuICAgICAgYWZ0ZXJFYWNoKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlc3Npb25JZCkge1xuICAgICAgICAgIGF3YWl0IGF4aW9zLmRlbGV0ZShgJHtiYXNlVXJsfS9zZXNzaW9uLyR7c2Vzc2lvbklkfWApO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBub3QgYWxsb3cgY3JlYXRlIHNlc3Npb24gd2l0aCBkZXNpcmVkIGNhcHMgKE1KU09OV1ApJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBkZXNpcmVkQ2FwYWJpbGl0aWVzID0ge2E6ICdiJ307XG4gICAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb25gLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGRhdGE6IHtkZXNpcmVkQ2FwYWJpbGl0aWVzfVxuICAgICAgICB9KTtcbiAgICAgICAgc2hvdWxkLmVxdWFsKGRhdGEudmFsdWUsIG51bGwpO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIGZhaWwgdG8gY3JlYXRlIHNlc3Npb24gd2l0aG91dCBjYXBhYmlsaXRpZXMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb25gLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICB9KS5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoLzQwMC8pO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIGFsbG93IGNyZWF0ZSBzZXNzaW9uIHdpdGggY2FwYWJpbGl0aWVzIChXM0MpJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCB3M2NDYXBhYmlsaXRpZXMgPSB7YWx3YXlzTWF0Y2g6IHsnYXBwaXVtOmUnOiAnZid9fTtcbiAgICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbmAsXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgZGF0YToge2NhcGFiaWxpdGllczogdzNjQ2FwYWJpbGl0aWVzfVxuICAgICAgICB9KTtcbiAgICAgICAgc2hvdWxkLm5vdC5leGlzdChkYXRhLnN0YXR1cyk7XG4gICAgICAgIHNob3VsZC5ub3QuZXhpc3QoZGF0YS5zZXNzaW9uSWQpO1xuICAgICAgICBkYXRhLnZhbHVlLmNhcGFiaWxpdGllcy5zaG91bGQuZXFsKHczY0NhcGFiaWxpdGllcyk7XG4gICAgICAgIGRhdGEudmFsdWUuc2Vzc2lvbklkLnNob3VsZC5leGlzdDtcbiAgICAgICAgc2Vzc2lvbklkID0gZGF0YS52YWx1ZS5zZXNzaW9uSWQ7XG4gICAgICB9KTtcbiAgICAgIGl0KCdzaG91bGQgcmFpc2UgYW4gZXJyb3IgaWYgdGhlIGRyaXZlciBkb2VzIG5vdCBzdXBwb3J0IFczQyB5ZXQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZVNlc3Npb25TdHViID0gc2FuZGJveC5zdHViKGRyaXZlciwgJ2NyZWF0ZVNlc3Npb24nKS5jYWxsc0Zha2UoZnVuY3Rpb24gKGNhcGFiaWxpdGllcykge1xuICAgICAgICAgIGRyaXZlci5zZXNzaW9uSWQgPSBudWxsO1xuICAgICAgICAgIHJldHVybiBCYXNlRHJpdmVyLnByb3RvdHlwZS5jcmVhdGVTZXNzaW9uLmNhbGwoZHJpdmVyLCBjYXBhYmlsaXRpZXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBsZXQge3N0YXR1cywgdmFsdWUsIHNlc3Npb25JZH0gPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb25gLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIGNhcGFiaWxpdGllczoge1xuICAgICAgICAgICAgICAgIGFsd2F5c01hdGNoOiB7XG4gICAgICAgICAgICAgICAgICBwbGF0Zm9ybU5hbWU6ICdGYWtlJyxcbiAgICAgICAgICAgICAgICAgICdhcHBpdW06ZGV2aWNlTmFtZSc6ICdGYWtlJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZpcnN0TWF0Y2g6IFt7fV0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVqZWN0ZWRXaXRoKC81MDAvKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBjcmVhdGVTZXNzaW9uU3R1Yi5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBkZXNjcmliZSgndzNjIGVuZHBvaW50cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHNlc3Npb25Vcmw7XG5cbiAgICAgICAgYmVmb3JlRWFjaChhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gU3RhcnQgYSBXM0Mgc2Vzc2lvblxuICAgICAgICAgIGNvbnN0IHt2YWx1ZX0gPSAoYXdhaXQgYXhpb3Moe1xuICAgICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uYCxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBjYXBhYmlsaXRpZXM6IHtcbiAgICAgICAgICAgICAgICBhbHdheXNNYXRjaDoge1xuICAgICAgICAgICAgICAgICAgcGxhdGZvcm1OYW1lOiAnRmFrZScsXG4gICAgICAgICAgICAgICAgICAnYXBwaXVtOmRldmljZU5hbWUnOiAnQ29tbW9kb3JlIDY0JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZpcnN0TWF0Y2g6IFt7fV0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pKS5kYXRhO1xuICAgICAgICAgIHNlc3Npb25JZCA9IHZhbHVlLnNlc3Npb25JZDtcbiAgICAgICAgICBzZXNzaW9uVXJsID0gYCR7YmFzZVVybH0vc2Vzc2lvbi8ke3Nlc3Npb25JZH1gO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChgc2hvdWxkIHRocm93IDQwMCBCYWQgUGFyYW1ldGVycyBleGNlcHRpb24gaWYgdGhlIHBhcmFtZXRlcnMgYXJlIGJhZGAsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb25zdCB7c3RhdHVzLCBkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICAgIHVybDogYCR7c2Vzc2lvblVybH0vYWN0aW9uc2AsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIHZhbGlkYXRlU3RhdHVzOiBudWxsLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBiYWQ6ICdwYXJhbXMnLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5zaG91bGQuZXF1YWwoNDAwKTtcblxuICAgICAgICAgIGNvbnN0IHtlcnJvcjogdzNjRXJyb3IsIG1lc3NhZ2UsIHN0YWNrdHJhY2V9ID0gZGF0YS52YWx1ZTtcbiAgICAgICAgICBtZXNzYWdlLnNob3VsZC5tYXRjaCgvUGFyYW1ldGVycyB3ZXJlIGluY29ycmVjdC8pO1xuICAgICAgICAgIHN0YWNrdHJhY2Uuc2hvdWxkLm1hdGNoKC9wcm90b2NvbC5qcy8pO1xuICAgICAgICAgIHczY0Vycm9yLnNob3VsZC5iZS5hLnN0cmluZztcbiAgICAgICAgICB3M2NFcnJvci5zaG91bGQuZXF1YWwoZXJyb3JzLkludmFsaWRBcmd1bWVudEVycm9yLmVycm9yKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdChgc2hvdWxkIHRocm93IDQwNSBleGNlcHRpb24gaWYgdGhlIGNvbW1hbmQgaGFzbid0IGJlZW4gaW1wbGVtZW50ZWQgeWV0YCwgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnN0IHtzdGF0dXMsIGRhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICAgICAgdXJsOiBgJHtzZXNzaW9uVXJsfS9hY3Rpb25zYCxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdmFsaWRhdGVTdGF0dXM6IG51bGwsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIGFjdGlvbnM6IFtdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdGF0dXMuc2hvdWxkLmVxdWFsKDQwNSk7XG5cbiAgICAgICAgICBjb25zdCB7ZXJyb3I6IHczY0Vycm9yLCBtZXNzYWdlLCBzdGFja3RyYWNlfSA9IGRhdGEudmFsdWU7XG4gICAgICAgICAgbWVzc2FnZS5zaG91bGQubWF0Y2goL01ldGhvZCBoYXMgbm90IHlldCBiZWVuIGltcGxlbWVudGVkLyk7XG4gICAgICAgICAgc3RhY2t0cmFjZS5zaG91bGQubWF0Y2goL3Byb3RvY29sLmpzLyk7XG4gICAgICAgICAgdzNjRXJyb3Iuc2hvdWxkLmJlLmEuc3RyaW5nO1xuICAgICAgICAgIHczY0Vycm9yLnNob3VsZC5lcXVhbChlcnJvcnMuTm90WWV0SW1wbGVtZW50ZWRFcnJvci5lcnJvcigpKTtcbiAgICAgICAgICBtZXNzYWdlLnNob3VsZC5tYXRjaCgvTWV0aG9kIGhhcyBub3QgeWV0IGJlZW4gaW1wbGVtZW50ZWQvKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoYHNob3VsZCB0aHJvdyA1MDAgVW5rbm93biBFcnJvciBpZiB0aGUgY29tbWFuZCB0aHJvd3MgYW4gdW5leHBlY3RlZCBleGNlcHRpb25gLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZHJpdmVyLnBlcmZvcm1BY3Rpb25zID0gKCkgPT4geyB0aHJvdyBuZXcgRXJyb3IoYERpZG4ndCB3b3JrYCk7IH07XG4gICAgICAgICAgY29uc3Qge3N0YXR1cywgZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgICB1cmw6IGAke3Nlc3Npb25Vcmx9L2FjdGlvbnNgLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICB2YWxpZGF0ZVN0YXR1czogbnVsbCxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgYWN0aW9uczogW10sXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3RhdHVzLnNob3VsZC5lcXVhbCg1MDApO1xuXG4gICAgICAgICAgY29uc3Qge2Vycm9yOiB3M2NFcnJvciwgbWVzc2FnZSwgc3RhY2t0cmFjZX0gPSBkYXRhLnZhbHVlO1xuICAgICAgICAgIHN0YWNrdHJhY2Uuc2hvdWxkLm1hdGNoKC9wcm90b2NvbC5qcy8pO1xuICAgICAgICAgIHczY0Vycm9yLnNob3VsZC5iZS5hLnN0cmluZztcbiAgICAgICAgICB3M2NFcnJvci5zaG91bGQuZXF1YWwoZXJyb3JzLlVua25vd25FcnJvci5lcnJvcigpKTtcbiAgICAgICAgICBtZXNzYWdlLnNob3VsZC5tYXRjaCgvRGlkbid0IHdvcmsvKTtcblxuICAgICAgICAgIGRlbGV0ZSBkcml2ZXIucGVyZm9ybUFjdGlvbnM7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KGBzaG91bGQgdHJhbnNsYXRlIGVsZW1lbnQgZm9ybWF0IGZyb20gTUpTT05XUCB0byBXM0NgLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc3QgcmV0VmFsdWUgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNvbWV0aGluZzoge1xuICAgICAgICAgICAgICAgIFtNSlNPTldQX0VMRU1FTlRfS0VZXTogJ2Zvb28nLFxuICAgICAgICAgICAgICAgIG90aGVyOiAnYmFyJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIFtNSlNPTldQX0VMRU1FTlRfS0VZXTogJ2JhcidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnaWdub3JlJyxcbiAgICAgICAgICBdO1xuXG4gICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZSA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc29tZXRoaW5nOiB7XG4gICAgICAgICAgICAgICAgW01KU09OV1BfRUxFTUVOVF9LRVldOiAnZm9vbycsXG4gICAgICAgICAgICAgICAgW1czQ19FTEVNRU5UX0tFWV06ICdmb29vJyxcbiAgICAgICAgICAgICAgICBvdGhlcjogJ2JhcidcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICBbTUpTT05XUF9FTEVNRU5UX0tFWV06ICdiYXInLFxuICAgICAgICAgICAgICBbVzNDX0VMRU1FTlRfS0VZXTogJ2JhcidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnaWdub3JlJyxcbiAgICAgICAgICBdO1xuXG4gICAgICAgICAgY29uc3QgZmluZEVsZW1lbnRzQmFja3VwID0gZHJpdmVyLmZpbmRFbGVtZW50cztcbiAgICAgICAgICBkcml2ZXIuZmluZEVsZW1lbnRzID0gKCkgPT4gcmV0VmFsdWU7XG4gICAgICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgYXhpb3MucG9zdChgJHtzZXNzaW9uVXJsfS9lbGVtZW50c2AsIHtcbiAgICAgICAgICAgIHVzaW5nOiAnd2hhdGV2ZXInLFxuICAgICAgICAgICAgdmFsdWU6ICd3aGF0ZXZlcicsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGF0YS52YWx1ZS5zaG91bGQuZXFsKGV4cGVjdGVkVmFsdWUpO1xuICAgICAgICAgIGRyaXZlci5maW5kRWxlbWVudHMgPSBmaW5kRWxlbWVudHNCYWNrdXA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KGBzaG91bGQgZmFpbCB3aXRoIGEgNDA4IGVycm9yIGlmIGl0IHRocm93cyBhIFRpbWVvdXRFcnJvciBleGNlcHRpb25gLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgbGV0IHNldFVybFN0dWIgPSBzYW5kYm94LnN0dWIoZHJpdmVyLCAnc2V0VXJsJykuY2FsbHNGYWtlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcnMuVGltZW91dEVycm9yO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IHtzdGF0dXMsIGRhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICAgICAgdXJsOiBgJHtzZXNzaW9uVXJsfS91cmxgLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICB2YWxpZGF0ZVN0YXR1czogbnVsbCxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS8nLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YXR1cy5zaG91bGQuZXF1YWwoNDA4KTtcblxuICAgICAgICAgIGNvbnN0IHtlcnJvcjogdzNjRXJyb3IsIG1lc3NhZ2UsIHN0YWNrdHJhY2V9ID0gZGF0YS52YWx1ZTtcbiAgICAgICAgICBzdGFja3RyYWNlLnNob3VsZC5tYXRjaCgvcHJvdG9jb2wuanMvKTtcbiAgICAgICAgICB3M2NFcnJvci5zaG91bGQuYmUuYS5zdHJpbmc7XG4gICAgICAgICAgdzNjRXJyb3Iuc2hvdWxkLmVxdWFsKGVycm9ycy5UaW1lb3V0RXJyb3IuZXJyb3IoKSk7XG4gICAgICAgICAgbWVzc2FnZS5zaG91bGQubWF0Y2goL0FuIG9wZXJhdGlvbiBkaWQgbm90IGNvbXBsZXRlIGJlZm9yZSBpdHMgdGltZW91dCBleHBpcmVkLyk7XG5cbiAgICAgICAgICBzZXRVcmxTdHViLnJlc3RvcmUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoYHNob3VsZCBwYXNzIHdpdGggMjAwIEhUVFAgc3RhdHVzIGNvZGUgaWYgdGhlIGNvbW1hbmQgcmV0dXJucyBhIHZhbHVlYCwgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGRyaXZlci5wZXJmb3JtQWN0aW9ucyA9IChhY3Rpb25zKSA9PiAnSXQgd29ya3MgJyArIGFjdGlvbnMuam9pbignJyk7XG4gICAgICAgICAgY29uc3Qge3N0YXR1cywgdmFsdWUsIHNlc3Npb25JZH0gPSAoYXdhaXQgYXhpb3MucG9zdChgJHtzZXNzaW9uVXJsfS9hY3Rpb25zYCwge1xuICAgICAgICAgICAgYWN0aW9uczogWydhJywgJ2InLCAnYyddLFxuICAgICAgICAgIH0pKS5kYXRhO1xuICAgICAgICAgIHNob3VsZC5ub3QuZXhpc3Qoc2Vzc2lvbklkKTtcbiAgICAgICAgICBzaG91bGQubm90LmV4aXN0KHN0YXR1cyk7XG4gICAgICAgICAgdmFsdWUuc2hvdWxkLmVxdWFsKCdJdCB3b3JrcyBhYmMnKTtcbiAgICAgICAgICBkZWxldGUgZHJpdmVyLnBlcmZvcm1BY3Rpb25zO1xuICAgICAgICB9KTtcblxuICAgICAgICBkZXNjcmliZSgnandwcm94eScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBsZXQgcG9ydDtcbiAgICAgICAgICBsZXQgc2VydmVyLCBqd3Byb3h5LCBhcHA7XG5cbiAgICAgICAgICBiZWZvcmUoYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcG9ydCA9IGF3YWl0IGdldFRlc3RQb3J0KHRydWUpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBjcmVhdGVQcm94eVNlcnZlcihzZXNzaW9uSWQsIHBvcnQpO1xuICAgICAgICAgICAgc2VydmVyID0gcmVzLnNlcnZlcjtcbiAgICAgICAgICAgIGFwcCA9IHJlcy5hcHA7XG4gICAgICAgICAgICBqd3Byb3h5ID0gbmV3IEpXUHJveHkoe2hvc3Q6IFRFU1RfSE9TVCwgcG9ydH0pO1xuICAgICAgICAgICAgandwcm94eS5zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG4gICAgICAgICAgICBkcml2ZXIucGVyZm9ybUFjdGlvbnMgPSBhc3luYyAoYWN0aW9ucykgPT4gYXdhaXQgandwcm94eS5jb21tYW5kKCcvcGVyZm9ybS1hY3Rpb25zJywgJ1BPU1QnLCBhY3Rpb25zKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGFmdGVyRWFjaChhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZWxldGUgZHJpdmVyLnBlcmZvcm1BY3Rpb25zO1xuICAgICAgICAgICAgYXdhaXQgc2VydmVyLmNsb3NlKCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIHdvcmsgaWYgYSBwcm94aWVkIHJlcXVlc3QgcmV0dXJucyBhIHJlc3BvbnNlIHdpdGggc3RhdHVzIDIwMCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFwcC5wb3N0KCcvc2Vzc2lvbi86c2Vzc2lvbklkL3BlcmZvcm0tYWN0aW9ucycsIChyZXEsIHJlcykgPT4ge1xuICAgICAgICAgICAgICByZXMuanNvbih7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkOiByZXEucGFyYW1zLnNlc3Npb25JZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVxLmJvZHksXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCB7c3RhdHVzLCB2YWx1ZSwgc2Vzc2lvbklkfSA9IChhd2FpdCBheGlvcy5wb3N0KGAke3Nlc3Npb25Vcmx9L2FjdGlvbnNgLCB7XG4gICAgICAgICAgICAgIGFjdGlvbnM6IFsxLCAyLCAzXSxcbiAgICAgICAgICAgIH0pKS5kYXRhO1xuICAgICAgICAgICAgdmFsdWUuc2hvdWxkLmVxbChbMSwgMiwgM10pO1xuICAgICAgICAgICAgc2hvdWxkLm5vdC5leGlzdChzdGF0dXMpO1xuICAgICAgICAgICAgc2hvdWxkLm5vdC5leGlzdChzZXNzaW9uSWQpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZXJyb3IgaWYgYSBwcm94aWVkIHJlcXVlc3QgcmV0dXJucyBhIE1KU09OV1AgZXJyb3IgcmVzcG9uc2UnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhcHAucG9zdCgnL3Nlc3Npb24vOnNlc3Npb25JZC9wZXJmb3JtLWFjdGlvbnMnLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDYsXG4gICAgICAgICAgICAgICAgdmFsdWU6ICdBIHByb2JsZW0gb2NjdXJyZWQnLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qge3N0YXR1cywgZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgICAgIHVybDogYCR7c2Vzc2lvblVybH0vYWN0aW9uc2AsXG4gICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICB2YWxpZGF0ZVN0YXR1czogbnVsbCxcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGFjdGlvbnM6IFsxLCAyLCAzXSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdGF0dXMuc2hvdWxkLmVxdWFsKEhUVFBTdGF0dXNDb2Rlcy5OT1RfRk9VTkQpO1xuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoZGF0YSkuc2hvdWxkLm1hdGNoKC9BIHByb2JsZW0gb2NjdXJyZWQvKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIFczQyBlcnJvciBpZiBhIHByb3hpZWQgcmVxdWVzdCByZXR1cm5zIGEgVzNDIGVycm9yIHJlc3BvbnNlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYFNvbWUgZXJyb3Igb2NjdXJyZWRgKTtcbiAgICAgICAgICAgIGVycm9yLnczY1N0YXR1cyA9IDQxNDtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVDb21tYW5kU3R1YiA9IHNhbmRib3guc3R1Yihkcml2ZXIsICdleGVjdXRlQ29tbWFuZCcpLnJldHVybnMoe1xuICAgICAgICAgICAgICBwcm90b2NvbDogJ1czQycsXG4gICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB7c3RhdHVzLCBkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICAgICAgdXJsOiBgJHtzZXNzaW9uVXJsfS9hY3Rpb25zYCxcbiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgIHZhbGlkYXRlU3RhdHVzOiBudWxsLFxuICAgICAgICAgICAgICBkYXRhOiB7YWN0aW9uczogWzEsIDIsIDNdfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLnNob3VsZC5lcXVhbCg0MTQpO1xuICAgICAgICAgICAgY29uc3Qge2Vycm9yOiB3M2NFcnJvciwgbWVzc2FnZTogZXJyTWVzc2FnZSwgc3RhY2t0cmFjZX0gPSBkYXRhLnZhbHVlO1xuICAgICAgICAgICAgdzNjRXJyb3Iuc2hvdWxkLmVxdWFsKCd1bmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICBzdGFja3RyYWNlLnNob3VsZC5tYXRjaCgvU29tZSBlcnJvciBvY2N1cnJlZC8pO1xuICAgICAgICAgICAgZXJyTWVzc2FnZS5zaG91bGQuZXF1YWwoJ1NvbWUgZXJyb3Igb2NjdXJyZWQnKTtcbiAgICAgICAgICAgIGV4ZWN1dGVDb21tYW5kU3R1Yi5yZXN0b3JlKCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBlcnJvciBpZiBhIHByb3hpZWQgcmVxdWVzdCByZXR1cm5zIGEgTUpTT05XUCBlcnJvciByZXNwb25zZSBidXQgSFRUUCBzdGF0dXMgY29kZSBpcyAyMDAnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhcHAucG9zdCgnL3Nlc3Npb24vOnNlc3Npb25JZC9wZXJmb3JtLWFjdGlvbnMnLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgICAgIHNlc3Npb25JZDogJ0Zha2UgU2Vzc2lvbiBJZCcsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiA3LFxuICAgICAgICAgICAgICAgIHZhbHVlOiAnQSBwcm9ibGVtIG9jY3VycmVkJyxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHtzdGF0dXMsIGRhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICAgICAgICB1cmw6IGAke3Nlc3Npb25Vcmx9L2FjdGlvbnNgLFxuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgdmFsaWRhdGVTdGF0dXM6IG51bGwsXG4gICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zOiBbMSwgMiwgM10sXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLnNob3VsZC5lcXVhbChIVFRQU3RhdHVzQ29kZXMuTk9UX0ZPVU5EKTtcbiAgICAgICAgICAgIGNvbnN0IHtlcnJvcjogdzNjRXJyb3IsIG1lc3NhZ2U6IGVyck1lc3NhZ2UsIHN0YWNrdHJhY2V9ID0gZGF0YS52YWx1ZTtcbiAgICAgICAgICAgIHczY0Vycm9yLnNob3VsZC5lcXVhbCgnbm8gc3VjaCBlbGVtZW50Jyk7XG4gICAgICAgICAgICBlcnJNZXNzYWdlLnNob3VsZC5tYXRjaCgvQSBwcm9ibGVtIG9jY3VycmVkLyk7XG4gICAgICAgICAgICBzdGFja3RyYWNlLnNob3VsZC5leGlzdDtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGVycm9yIGlmIGEgcHJveGllZCByZXF1ZXN0IHJldHVybnMgYSBXM0MgZXJyb3IgcmVzcG9uc2UnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhcHAucG9zdCgnL3Nlc3Npb24vOnNlc3Npb25JZC9wZXJmb3JtLWFjdGlvbnMnLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICBlcnJvcjogJ25vIHN1Y2ggZWxlbWVudCcsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnZG9lcyBub3QgbWFrZSBhIGRpZmZlcmVuY2UnLFxuICAgICAgICAgICAgICAgICAgc3RhY2t0cmFjZTogJ2FyYml0cmFyeSBzdGFja3RyYWNlJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qge3N0YXR1cywgZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgICAgICAgIHVybDogYCR7c2Vzc2lvblVybH0vYWN0aW9uc2AsXG4gICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICB2YWxpZGF0ZVN0YXR1czogbnVsbCxcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGFjdGlvbnM6IFsxLCAyLCAzXSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdGF0dXMuc2hvdWxkLmVxdWFsKEhUVFBTdGF0dXNDb2Rlcy5OT1RfRk9VTkQpO1xuICAgICAgICAgICAgY29uc3Qge2Vycm9yOiB3M2NFcnJvciwgc3RhY2t0cmFjZX0gPSBkYXRhLnZhbHVlO1xuICAgICAgICAgICAgdzNjRXJyb3Iuc2hvdWxkLmVxdWFsKCdubyBzdWNoIGVsZW1lbnQnKTtcbiAgICAgICAgICAgIHN0YWNrdHJhY2Uuc2hvdWxkLm1hdGNoKC9hcmJpdHJhcnkgc3RhY2t0cmFjZS8pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYW4gZXJyb3IgaWYgYSBwcm94aWVkIHJlcXVlc3QgcmV0dXJucyBhIFczQyBlcnJvciByZXNwb25zZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFwcC5wb3N0KCcvc2Vzc2lvbi86c2Vzc2lvbklkL3BlcmZvcm0tYWN0aW9ucycsIChyZXEsIHJlcykgPT4ge1xuICAgICAgICAgICAgICByZXMuc2V0KCdDb25uZWN0aW9uJywgJ2Nsb3NlJyk7XG4gICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDQ0KS5qc29uKHtcbiAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgZXJyb3I6ICdib2d1cyBlcnJvciBjb2RlJyxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdkb2VzIG5vdCBtYWtlIGEgZGlmZmVyZW5jZScsXG4gICAgICAgICAgICAgICAgICBzdGFja3RyYWNlOiAnYXJiaXRyYXJ5IHN0YWNrdHJhY2UnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB7c3RhdHVzLCBkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgICAgICAgdXJsOiBgJHtzZXNzaW9uVXJsfS9hY3Rpb25zYCxcbiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgIHZhbGlkYXRlU3RhdHVzOiBudWxsLFxuICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uczogWzEsIDIsIDNdLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXR1cy5zaG91bGQuZXF1YWwoSFRUUFN0YXR1c0NvZGVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUik7XG4gICAgICAgICAgICBjb25zdCB7ZXJyb3I6IHczY0Vycm9yLCBzdGFja3RyYWNlfSA9IGRhdGEudmFsdWU7XG4gICAgICAgICAgICB3M2NFcnJvci5zaG91bGQuZXF1YWwoJ3Vua25vd24gZXJyb3InKTtcbiAgICAgICAgICAgIHN0YWNrdHJhY2Uuc2hvdWxkLm1hdGNoKC9hcmJpdHJhcnkgc3RhY2t0cmFjZS8pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21tYW5kcyB3aXRoIG5vIHJlc3BvbnNlIHZhbHVlcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9mb3J3YXJkYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICB9KTtcbiAgICAgIGRhdGEuc2hvdWxkLmVxbCh7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzZXNzaW9uSWQ6ICdmb28nXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgZW1wdHkgc3RyaW5nIHJlc3BvbnNlIHZhbHVlcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uL2Zvby9lbGVtZW50L2Jhci90ZXh0YCxcbiAgICAgIH0pO1xuICAgICAgZGF0YS5zaG91bGQuZXFsKHtcbiAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICBzZXNzaW9uSWQ6ICdmb28nXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2VuZCA1MDAgcmVzcG9uc2UgYW5kIGFuIFVua25vd24gb2JqZWN0IGZvciByZWplY3RlZCBjb21tYW5kcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHtzdGF0dXMsIGRhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vZm9vL3JlZnJlc2hgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgdmFsaWRhdGVTdGF0dXM6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgc3RhdHVzLnNob3VsZC5lcXVhbCg1MDApO1xuICAgICAgZGF0YS52YWx1ZS5lcnJvci5zaG91bGQuZXFsKCd1bmtub3duIGVycm9yJyk7XG4gICAgICBkYXRhLnZhbHVlLm1lc3NhZ2Uuc2hvdWxkLmVxbCgnQW4gdW5rbm93biBzZXJ2ZXItc2lkZSBlcnJvciBvY2N1cnJlZCB3aGlsZSBwcm9jZXNzaW5nICcgK1xuICAgICAgICAndGhlIGNvbW1hbmQuIE9yaWdpbmFsIGVycm9yOiBUb28gRnJlc2ghJyk7XG4gICAgICBkYXRhLnNlc3Npb25JZC5zaG91bGQuZXFsKCdmb28nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHRocm93IFVua25vd25FcnJvciB3aGVuIGtub3duJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3Qge3N0YXR1cywgZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi9mb29gLFxuICAgICAgICB2YWxpZGF0ZVN0YXR1czogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICBzdGF0dXMuc2hvdWxkLmVxdWFsKDQwNCk7XG4gICAgICBkYXRhLnZhbHVlLmVycm9yLnNob3VsZC5lcWwoJ2ludmFsaWQgc2Vzc2lvbiBpZCcpO1xuICAgICAgZGF0YS52YWx1ZS5tZXNzYWdlLnNob3VsZC5lcWwoJ0Egc2Vzc2lvbiBpcyBlaXRoZXIgdGVybWluYXRlZCBvciBub3Qgc3RhcnRlZCcpO1xuICAgICAgZGF0YS5zZXNzaW9uSWQuc2hvdWxkLmVxbCgnZm9vJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzZXNzaW9uIElkcycsIGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgZHJpdmVyID0gbmV3IEZha2VEcml2ZXIoKTtcbiAgICBsZXQgbWpzb253cFNlcnZlcjtcblxuICAgIGJlZm9yZShhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBtanNvbndwU2VydmVyID0gYXdhaXQgc2VydmVyKHtcbiAgICAgICAgcm91dGVDb25maWd1cmluZ0Z1bmN0aW9uOiByb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24oZHJpdmVyKSxcbiAgICAgICAgcG9ydCxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXIoYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYXdhaXQgbWpzb253cFNlcnZlci5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5zZXNzaW9uSWQgPSBudWxsO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCBTZXNzaW9uSWQgZm9yIGNvbW1hbmRzIHdpdGhvdXQgc2Vzc2lvbklkcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zdGF0dXNgLFxuICAgICAgfSk7XG5cbiAgICAgIHNob3VsZC5lcXVhbChkYXRhLnNlc3Npb25JZCwgbnVsbCk7XG4gICAgfSk7XG5cbiAgICBpdCgncmVzcG9uZHMgd2l0aCB0aGUgc2FtZSBzZXNzaW9uIElEIGluIHRoZSByZXF1ZXN0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IHNlc3Npb25JZCA9ICdWYWRlciBTZXNzaW9ucyc7XG4gICAgICBkcml2ZXIuc2Vzc2lvbklkID0gc2Vzc2lvbklkO1xuXG4gICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi8ke3Nlc3Npb25JZH0vdXJsYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGRhdGE6IHt1cmw6ICdodHRwOi8vZ29vZ2xlLmNvbSd9XG4gICAgICB9KTtcblxuICAgICAgc2hvdWxkLmV4aXN0KGRhdGEuc2Vzc2lvbklkKTtcbiAgICAgIGRhdGEuc2Vzc2lvbklkLnNob3VsZC5lcWwoc2Vzc2lvbklkKTtcbiAgICB9KTtcblxuICAgIGl0KCd5ZWxscyBpZiBubyBzZXNzaW9uIGV4aXN0cycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBzZXNzaW9uSWQgPSAnVmFkZXIgU2Vzc2lvbnMnO1xuXG4gICAgICBjb25zdCB7ZGF0YSwgc3RhdHVzfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uLyR7c2Vzc2lvbklkfS91cmxgLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgdmFsaWRhdGVTdGF0dXM6IG51bGwsXG4gICAgICAgIGRhdGE6IHt1cmw6ICdodHRwOi8vZ29vZ2xlLmNvbSd9LFxuICAgICAgfSk7XG5cbiAgICAgIHN0YXR1cy5zaG91bGQuZXF1YWwoNDA0KTtcbiAgICAgIGRhdGEudmFsdWUubWVzc2FnZS5zaG91bGQuY29udGFpbignc2Vzc2lvbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3llbGxzIGlmIGludmFsaWQgc2Vzc2lvbiBpcyBzZW50JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IHNlc3Npb25JZCA9ICdWYWRlciBTZXNzaW9ucyc7XG4gICAgICBkcml2ZXIuc2Vzc2lvbklkID0gJ3JlY2Vzc2lvbic7XG5cbiAgICAgIGNvbnN0IHtkYXRhLCBzdGF0dXN9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vJHtzZXNzaW9uSWR9L3VybGAsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICB2YWxpZGF0ZVN0YXR1czogbnVsbCxcbiAgICAgICAgZGF0YToge3VybDogJ2h0dHA6Ly9nb29nbGUuY29tJ30sXG4gICAgICB9KTtcblxuICAgICAgc3RhdHVzLnNob3VsZC5lcXVhbCg0MDQpO1xuICAgICAgZGF0YS52YWx1ZS5tZXNzYWdlLnNob3VsZC5jb250YWluKCdzZXNzaW9uJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgc2Vzc2lvbiBJRHMgaW4gZXJyb3IgcmVzcG9uc2VzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IHNlc3Npb25JZCA9ICdWYWRlciBTZXNzaW9ucyc7XG4gICAgICBkcml2ZXIuc2Vzc2lvbklkID0gc2Vzc2lvbklkO1xuXG4gICAgICBjb25zdCB7ZGF0YSwgc3RhdHVzfSA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9zZXNzaW9uLyR7c2Vzc2lvbklkfS9yZWZyZXNoYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIHZhbGlkYXRlU3RhdHVzOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIHN0YXR1cy5zaG91bGQuZXF1YWwoNTAwKTtcbiAgICAgIGRhdGEudmFsdWUuZXJyb3Iuc2hvdWxkLmVxbCgndW5rbm93biBlcnJvcicpO1xuICAgICAgZGF0YS52YWx1ZS5tZXNzYWdlLnNob3VsZC5lcWwoJ0FuIHVua25vd24gc2VydmVyLXNpZGUgZXJyb3Igb2NjdXJyZWQgd2hpbGUgcHJvY2Vzc2luZyAnICtcbiAgICAgICAgJ3RoZSBjb21tYW5kLiBPcmlnaW5hbCBlcnJvcjogVG9vIEZyZXNoIScpO1xuICAgICAgZGF0YS5zZXNzaW9uSWQuc2hvdWxkLmVxbCgnVmFkZXIgU2Vzc2lvbnMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgbmV3IHNlc3Npb24gSUQgb24gY3JlYXRlJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb25gLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgZGF0YToge2NhcGFiaWxpdGllczoge2Fsd2F5c01hdGNoOiB7J2FwcGl1bTpncmVldGluZyc6ICdoZWxsbyd9LCBmaXJzdE1hdGNoOiBbe31dfX1cbiAgICAgIH0pO1xuXG4gICAgICBzaG91bGQuZXhpc3QoZGF0YS52YWx1ZS5zZXNzaW9uSWQpO1xuICAgICAgZGF0YS52YWx1ZS5zZXNzaW9uSWQuaW5kZXhPZignZmFrZVNlc3Npb25fJykuc2hvdWxkLmVxdWFsKDApO1xuICAgICAgZGF0YS52YWx1ZS5jYXBhYmlsaXRpZXMuc2hvdWxkLmVxbCh7YWx3YXlzTWF0Y2g6IHsnYXBwaXVtOmdyZWV0aW5nJzogJ2hlbGxvJ30sIGZpcnN0TWF0Y2g6IFt7fV19KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZpYSBkcml2ZXJzIGpzb253cCBwcm94eScsIGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgZHJpdmVyO1xuICAgIGxldCBzZXNzaW9uSWQgPSAnZm9vJztcbiAgICBsZXQgbWpzb253cFNlcnZlcjtcblxuICAgIGJlZm9yZUVhY2goYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyID0gbmV3IEZha2VEcml2ZXIoKTtcbiAgICAgIGRyaXZlci5zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG4gICAgICBkcml2ZXIucHJveHlBY3RpdmUgPSAoKSA9PiB0cnVlO1xuICAgICAgZHJpdmVyLmNhblByb3h5ID0gKCkgPT4gdHJ1ZTtcblxuICAgICAgbWpzb253cFNlcnZlciA9IGF3YWl0IHNlcnZlcih7XG4gICAgICAgIHJvdXRlQ29uZmlndXJpbmdGdW5jdGlvbjogcm91dGVDb25maWd1cmluZ0Z1bmN0aW9uKGRyaXZlciksXG4gICAgICAgIHBvcnQsXG4gICAgICAgIGV4dHJhTWV0aG9kTWFwOiBGYWtlRHJpdmVyLm5ld01ldGhvZE1hcFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBhZnRlckVhY2goYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYXdhaXQgbWpzb253cFNlcnZlci5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnaXZlIGEgbmljZSBlcnJvciBpZiBwcm94eWluZyBpcyBzZXQgYnV0IG5vIHByb3h5IGZ1bmN0aW9uIGV4aXN0cycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5jYW5Qcm94eSA9ICgpID0+IGZhbHNlO1xuICAgICAgY29uc3Qge3N0YXR1cywgZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi8ke3Nlc3Npb25JZH0vdXJsYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIHZhbGlkYXRlU3RhdHVzOiBudWxsLFxuICAgICAgICBkYXRhOiB7dXJsOiAnaHR0cDovL2dvb2dsZS5jb20nfSxcbiAgICAgIH0pO1xuXG4gICAgICBzdGF0dXMuc2hvdWxkLmVxdWFsKDUwMCk7XG4gICAgICBkYXRhLnZhbHVlLmVycm9yLnNob3VsZC5lcWwoJ3Vua25vd24gZXJyb3InKTtcbiAgICAgIGRhdGEudmFsdWUubWVzc2FnZS5zaG91bGQuZXFsKCdBbiB1bmtub3duIHNlcnZlci1zaWRlIGVycm9yIG9jY3VycmVkIHdoaWxlIHByb2Nlc3NpbmcgJyArXG4gICAgICAgICd0aGUgY29tbWFuZC4gT3JpZ2luYWwgZXJyb3I6IFRyeWluZyB0byBwcm94eSB0byBhICcgK1xuICAgICAgICAnc2VydmVyIGJ1dCB0aGUgZHJpdmVyIGlzIHVuYWJsZSB0byBwcm94eScpO1xuICAgICAgZGF0YS5zZXNzaW9uSWQuc2hvdWxkLmVxbCgnZm9vJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHBhc3Mgb24gYW55IGVycm9ycyBpbiBwcm94eWluZycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5wcm94eVJlcVJlcyA9IGFzeW5jIGZ1bmN0aW9uICgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSByZXF1aXJlLWF3YWl0XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignZm9vJyk7XG4gICAgICB9O1xuICAgICAgY29uc3Qge3N0YXR1cywgZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi8ke3Nlc3Npb25JZH0vdXJsYCxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIHZhbGlkYXRlU3RhdHVzOiBudWxsLFxuICAgICAgICBkYXRhOiB7dXJsOiAnaHR0cDovL2dvb2dsZS5jb20nfSxcbiAgICAgIH0pO1xuXG4gICAgICBzdGF0dXMuc2hvdWxkLmVxdWFsKDUwMCk7XG4gICAgICBkYXRhLnZhbHVlLmVycm9yLnNob3VsZC5lcWwoJ3Vua25vd24gZXJyb3InKTtcbiAgICAgIGRhdGEudmFsdWUubWVzc2FnZS5zaG91bGQuZXFsKCdBbiB1bmtub3duIHNlcnZlci1zaWRlIGVycm9yIG9jY3VycmVkIHdoaWxlIHByb2Nlc3NpbmcgJyArXG4gICAgICAgICd0aGUgY29tbWFuZC4gT3JpZ2luYWwgZXJyb3I6IENvdWxkIG5vdCBwcm94eS4gUHJveHkgZXJyb3I6IGZvbycpO1xuICAgICAgZGF0YS5zZXNzaW9uSWQuc2hvdWxkLmVxbCgnZm9vJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFibGUgdG8gdGhyb3cgUHJveHlSZXF1ZXN0RXJyb3IgaW4gcHJveHlpbmcnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIucHJveHlSZXFSZXMgPSBhc3luYyBmdW5jdGlvbiAoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcmVxdWlyZS1hd2FpdFxuICAgICAgICBsZXQganNvbndwID0ge3N0YXR1czogMzUsIHZhbHVlOiAnTm8gc3VjaCBjb250ZXh0IGZvdW5kLicsIHNlc3Npb25JZDogJ2Zvbyd9O1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JzLlByb3h5UmVxdWVzdEVycm9yKGBDb3VsZCBub3QgcHJveHkgY29tbWFuZCB0byByZW1vdGUgc2VydmVyLiBgLCBqc29ud3ApO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IHtzdGF0dXMsIGRhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vJHtzZXNzaW9uSWR9L3VybGAsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICB2YWxpZGF0ZVN0YXR1czogbnVsbCxcbiAgICAgICAgZGF0YToge3VybDogJ2h0dHA6Ly9nb29nbGUuY29tJ30sXG4gICAgICB9KTtcblxuICAgICAgc3RhdHVzLnNob3VsZC5lcXVhbCg0MDApO1xuICAgICAgZGF0YS52YWx1ZS5lcnJvci5zaG91bGQuZXFsKCd1bmtub3duIGVycm9yJyk7XG4gICAgICBkYXRhLnZhbHVlLm1lc3NhZ2Uuc2hvdWxkLmVxbCgnTm8gc3VjaCBjb250ZXh0IGZvdW5kLicpO1xuICAgICAgZGF0YS5zZXNzaW9uSWQuc2hvdWxkLmVxbCgnZm9vJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGxldCB0aGUgcHJveHkgaGFuZGxlIHJlcS9yZXMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIucHJveHlSZXFSZXMgPSBhc3luYyBmdW5jdGlvbiAocmVxLCByZXMpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSByZXF1aXJlLWF3YWl0XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtjdXN0b206ICdkYXRhJ30pO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IHtzdGF0dXMsIGRhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vJHtzZXNzaW9uSWR9L3VybGAsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBkYXRhOiB7dXJsOiAnaHR0cDovL2dvb2dsZS5jb20nfVxuICAgICAgfSk7XG5cbiAgICAgIHN0YXR1cy5zaG91bGQuZXF1YWwoMjAwKTtcbiAgICAgIGRhdGEuc2hvdWxkLmVxbCh7Y3VzdG9tOiAnZGF0YSd9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYXZvaWQganNvbndwIHByb3h5aW5nIHdoZW4gcGF0aCBtYXRjaGVzIGF2b2lkYW5jZSBsaXN0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLmdldFByb3h5QXZvaWRMaXN0ID0gKCkgPT4gW1snUE9TVCcsIG5ldyBSZWdFeHAoJ14vc2Vzc2lvbi9bXi9dKy91cmwkJyldXTtcbiAgICAgIGNvbnN0IHtzdGF0dXMsIGRhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3Nlc3Npb24vJHtzZXNzaW9uSWR9L3VybGAsXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBkYXRhOiB7dXJsOiAnaHR0cDovL2dvb2dsZS5jb20nfSxcbiAgICAgIH0pO1xuXG4gICAgICBzdGF0dXMuc2hvdWxkLmVxdWFsKDIwMCk7XG4gICAgICBkYXRhLnNob3VsZC5lcWwoe1xuICAgICAgICB2YWx1ZTogJ05hdmlnYXRlZCB0bzogaHR0cDovL2dvb2dsZS5jb20nLFxuICAgICAgICBzZXNzaW9uSWRcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmYWlsIGlmIGF2b2lkIHByb3h5IGxpc3QgaXMgbWFsZm9ybWVkIGluIHNvbWUgd2F5JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYXN5bmMgZnVuY3Rpb24gYmFkUHJveHlBdm9pZGFuY2VMaXN0IChsaXN0KSB7XG4gICAgICAgIGRyaXZlci5nZXRQcm94eUF2b2lkTGlzdCA9ICgpID0+IGxpc3Q7XG4gICAgICAgIGNvbnN0IHtzdGF0dXMsIGRhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi8ke3Nlc3Npb25JZH0vdXJsYCxcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICB2YWxpZGF0ZVN0YXR1czogbnVsbCxcbiAgICAgICAgICBkYXRhOiB7dXJsOiAnaHR0cDovL2dvb2dsZS5jb20nfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc3RhdHVzLnNob3VsZC5lcXVhbCg1MDApO1xuICAgICAgICBkYXRhLnZhbHVlLm1lc3NhZ2Uuc2hvdWxkLmNvbnRhaW4oJ3JveHknKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxpc3RzID0gW1xuICAgICAgICAnZm9vJyxcbiAgICAgICAgW1snZm9vJ11dLFxuICAgICAgICBbWydCQVInLCAvbG9sL11dLFxuICAgICAgICBbWydHRVQnLCAnZm9vJ11dXG4gICAgICBdO1xuICAgICAgZm9yIChsZXQgbGlzdCBvZiBsaXN0cykge1xuICAgICAgICBhd2FpdCBiYWRQcm94eUF2b2lkYW5jZUxpc3QobGlzdCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGF2b2lkIHByb3h5aW5nIG5vbi1zZXNzaW9uIGNvbW1hbmRzIGV2ZW4gaWYgbm90IGluIHRoZSBsaXN0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgZHJpdmVyLmdldFByb3h5QXZvaWRMaXN0ID0gKCkgPT4gW1snUE9TVCcsIG5ldyBSZWdFeHAoJycpXV07XG5cbiAgICAgIGNvbnN0IHtzdGF0dXMsIGRhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICB1cmw6IGAke2Jhc2VVcmx9L3N0YXR1c2AsXG4gICAgICB9KTtcblxuICAgICAgc3RhdHVzLnNob3VsZC5lcXVhbCgyMDApO1xuICAgICAgZGF0YS5zaG91bGQuZXFsKHtcbiAgICAgICAgdmFsdWU6IFwiSSdtIGZpbmVcIixcbiAgICAgICAgc2Vzc2lvbklkOiBudWxsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYXZvaWQgcHJveHlpbmcgZGVsZXRlU2Vzc2lvbiBjb21tYW5kcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRyaXZlci5nZXRQcm94eUF2b2lkTGlzdCA9ICgpID0+IFtbJ1BPU1QnLCBuZXcgUmVnRXhwKCcnKV1dO1xuXG4gICAgICBkcml2ZXIuc2Vzc2lvbklkLnNob3VsZC5lcXVhbChzZXNzaW9uSWQpO1xuICAgICAgY29uc3Qge3N0YXR1c30gPSBhd2FpdCBheGlvcy5kZWxldGUoYCR7YmFzZVVybH0vc2Vzc2lvbi8ke3Nlc3Npb25JZH1gKTtcblxuICAgICAgc3RhdHVzLnNob3VsZC5lcXVhbCgyMDApO1xuICAgICAgc2hvdWxkLm5vdC5leGlzdChkcml2ZXIuc2Vzc2lvbklkKTtcbiAgICAgIGRyaXZlci5qd3BQcm94eUFjdGl2ZS5zaG91bGQuYmUuZmFsc2U7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGF2b2lkIHByb3h5aW5nIHdoZW4gY29tbWFuZCBzcGVjIHNwZWNpZmllcyBuZXZlclByb3h5JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3Qge3N0YXR1cywgZGF0YX0gPSBhd2FpdCBheGlvcyh7XG4gICAgICAgIHVybDogYCR7YmFzZVVybH0vc2Vzc2lvbi8ke3Nlc3Npb25JZH0vbm9wcm94eWAsXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB9KTtcblxuICAgICAgc3RhdHVzLnNob3VsZC5lcXVhbCgyMDApO1xuICAgICAgZGF0YS5zaG91bGQuZXFsKHtcbiAgICAgICAgdmFsdWU6ICdUaGlzIHdhcyBub3QgcHJveGllZCcsXG4gICAgICAgIHNlc3Npb25JZFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgfSk7XG59KTtcbiJdfQ==