"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FakeDriver = void 0;

require("source-map-support/register");

var _lib = require("../../../lib");

var _constants = require("../../../lib/constants");

var _support = require("@appium/support");

class FakeDriver extends _lib.BaseDriver {
  static newMethodMap = {
    '/session/:sessionId/noproxy': {
      GET: {
        command: 'notProxiedCommand',
        neverProxy: true
      }
    }
  };

  constructor() {
    super();
    this.protocol = _constants.PROTOCOLS.MJSONWP;
    this.sessionId = null;
    this.jwpProxyActive = false;
  }

  sessionExists(sessionId) {
    if (!sessionId) {
      return false;
    }

    return sessionId === this.sessionId;
  }

  driverForSession() {
    return this;
  }

  async createSession(desiredCapabilities, requiredCapabilities, capabilities) {
    this.sessionId = `fakeSession_${_support.util.uuidV4()}`;
    return [this.sessionId, capabilities];
  }

  async executeCommand(cmd, ...args) {
    if (!this[cmd]) {
      throw new _lib.errors.NotYetImplementedError();
    }

    if (cmd === 'createSession') {
      this.protocol = (0, _lib.determineProtocol)(args);
    }

    return await this[cmd](...args);
  }

  async deleteSession() {
    this.jwpProxyActive = false;
    this.sessionId = null;
  }

  async getStatus() {
    return "I'm fine";
  }

  async setUrl(url) {
    return `Navigated to: ${url}`;
  }

  async getUrl() {
    return 'http://foobar.com';
  }

  async back(sessionId) {
    return sessionId;
  }

  async forward() {}

  async refresh() {
    throw new Error('Too Fresh!');
  }

  async getSession() {
    throw new _lib.errors.NoSuchDriverError();
  }

  async click(elementId, sessionId) {
    return [elementId, sessionId];
  }

  async implicitWait(ms) {
    return ms;
  }

  async clickCurrent(button) {
    return button;
  }

  async setNetworkConnection(type) {
    return type;
  }

  async moveTo(element, xOffset, yOffset) {
    return [element, xOffset, yOffset];
  }

  async getText() {
    return '';
  }

  async getAttribute(attr, elementId, sessionId) {
    return [attr, elementId, sessionId];
  }

  async setValue(value, elementId) {
    return [value, elementId];
  }

  async performTouch(...args) {
    return args;
  }

  async setFrame(frameId) {
    return frameId;
  }

  async removeApp(app) {
    return app;
  }

  async receiveAsyncResponse() {
    return {
      status: 13,
      value: 'Mishandled Driver Error'
    };
  }

  proxyActive() {
    return false;
  }

  getProxyAvoidList() {
    return [];
  }

  canProxy() {
    return false;
  }

  async notProxiedCommand() {
    return 'This was not proxied';
  }

}

exports.FakeDriver = FakeDriver;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Rlc3QvZTJlL3Byb3RvY29sL2Zha2UtZHJpdmVyLmpzIl0sIm5hbWVzIjpbIkZha2VEcml2ZXIiLCJCYXNlRHJpdmVyIiwibmV3TWV0aG9kTWFwIiwiR0VUIiwiY29tbWFuZCIsIm5ldmVyUHJveHkiLCJjb25zdHJ1Y3RvciIsInByb3RvY29sIiwiUFJPVE9DT0xTIiwiTUpTT05XUCIsInNlc3Npb25JZCIsImp3cFByb3h5QWN0aXZlIiwic2Vzc2lvbkV4aXN0cyIsImRyaXZlckZvclNlc3Npb24iLCJjcmVhdGVTZXNzaW9uIiwiZGVzaXJlZENhcGFiaWxpdGllcyIsInJlcXVpcmVkQ2FwYWJpbGl0aWVzIiwiY2FwYWJpbGl0aWVzIiwidXRpbCIsInV1aWRWNCIsImV4ZWN1dGVDb21tYW5kIiwiY21kIiwiYXJncyIsImVycm9ycyIsIk5vdFlldEltcGxlbWVudGVkRXJyb3IiLCJkZWxldGVTZXNzaW9uIiwiZ2V0U3RhdHVzIiwic2V0VXJsIiwidXJsIiwiZ2V0VXJsIiwiYmFjayIsImZvcndhcmQiLCJyZWZyZXNoIiwiRXJyb3IiLCJnZXRTZXNzaW9uIiwiTm9TdWNoRHJpdmVyRXJyb3IiLCJjbGljayIsImVsZW1lbnRJZCIsImltcGxpY2l0V2FpdCIsIm1zIiwiY2xpY2tDdXJyZW50IiwiYnV0dG9uIiwic2V0TmV0d29ya0Nvbm5lY3Rpb24iLCJ0eXBlIiwibW92ZVRvIiwiZWxlbWVudCIsInhPZmZzZXQiLCJ5T2Zmc2V0IiwiZ2V0VGV4dCIsImdldEF0dHJpYnV0ZSIsImF0dHIiLCJzZXRWYWx1ZSIsInZhbHVlIiwicGVyZm9ybVRvdWNoIiwic2V0RnJhbWUiLCJmcmFtZUlkIiwicmVtb3ZlQXBwIiwiYXBwIiwicmVjZWl2ZUFzeW5jUmVzcG9uc2UiLCJzdGF0dXMiLCJwcm94eUFjdGl2ZSIsImdldFByb3h5QXZvaWRMaXN0IiwiY2FuUHJveHkiLCJub3RQcm94aWVkQ29tbWFuZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQ0E7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QVIsRUFBbUIzQixTQUFuQixFQUE4QjtBQUM5QyxXQUFPLENBQUN3QyxJQUFELEVBQU9iLFNBQVAsRUFBa0IzQixTQUFsQixDQUFQO0FBQ0Q7O0FBRWEsUUFBUnlDLFFBQVEsQ0FBRUMsS0FBRixFQUFTZixTQUFULEVBQW9CO0FBQ2hDLFdBQU8sQ0FBQ2UsS0FBRCxFQUFRZixTQUFSLENBQVA7QUFDRDs7QUFFaUIsUUFBWmdCLFlBQVksQ0FBRSxHQUFHL0IsSUFBTCxFQUFXO0FBQzNCLFdBQU9BLElBQVA7QUFDRDs7QUFFYSxRQUFSZ0MsUUFBUSxDQUFFQyxPQUFGLEVBQVc7QUFDdkIsV0FBT0EsT0FBUDtBQUNEOztBQUVjLFFBQVRDLFNBQVMsQ0FBRUMsR0FBRixFQUFPO0FBQ3BCLFdBQU9BLEdBQVA7QUFDRDs7QUFFeUIsUUFBcEJDLG9CQUFvQixHQUFJO0FBRTVCLFdBQU87QUFBQ0MsTUFBQUEsTUFBTSxFQUFFLEVBQVQ7QUFBYVAsTUFBQUEsS0FBSyxFQUFFO0FBQXBCLEtBQVA7QUFDRDs7QUFFRFEsRUFBQUEsV0FBVyxHQUFpQjtBQUMxQixXQUFPLEtBQVA7QUFDRDs7QUFFREMsRUFBQUEsaUJBQWlCLEdBQWlCO0FBQ2hDLFdBQU8sRUFBUDtBQUNEOztBQUVEQyxFQUFBQSxRQUFRLEdBQWlCO0FBQ3ZCLFdBQU8sS0FBUDtBQUNEOztBQUVzQixRQUFqQkMsaUJBQWlCLEdBQUk7QUFDekIsV0FBTyxzQkFBUDtBQUNEOztBQXhJaUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWF3YWl0ICovXG5pbXBvcnQgeyBlcnJvcnMsIEJhc2VEcml2ZXIsIGRldGVybWluZVByb3RvY29sIH0gZnJvbSAnLi4vLi4vLi4vbGliJztcbmltcG9ydCB7IFBST1RPQ09MUyB9IGZyb20gJy4uLy4uLy4uL2xpYi9jb25zdGFudHMnO1xuaW1wb3J0IHsgdXRpbCB9IGZyb20gJ0BhcHBpdW0vc3VwcG9ydCc7XG5cblxuY2xhc3MgRmFrZURyaXZlciBleHRlbmRzIEJhc2VEcml2ZXIge1xuXG4gIHN0YXRpYyBuZXdNZXRob2RNYXAgPSB7XG4gICAgJy9zZXNzaW9uLzpzZXNzaW9uSWQvbm9wcm94eSc6IHtcbiAgICAgIEdFVDoge2NvbW1hbmQ6ICdub3RQcm94aWVkQ29tbWFuZCcsIG5ldmVyUHJveHk6IHRydWV9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucHJvdG9jb2wgPSBQUk9UT0NPTFMuTUpTT05XUDtcbiAgICB0aGlzLnNlc3Npb25JZCA9IG51bGw7XG4gICAgdGhpcy5qd3BQcm94eUFjdGl2ZSA9IGZhbHNlO1xuICB9XG5cbiAgc2Vzc2lvbkV4aXN0cyAoc2Vzc2lvbklkKSB7XG4gICAgaWYgKCFzZXNzaW9uSWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHNlc3Npb25JZCA9PT0gdGhpcy5zZXNzaW9uSWQ7XG4gIH1cblxuICBkcml2ZXJGb3JTZXNzaW9uICgvKnNlc3Npb25JZCovKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhc3luYyBjcmVhdGVTZXNzaW9uIChkZXNpcmVkQ2FwYWJpbGl0aWVzLCByZXF1aXJlZENhcGFiaWxpdGllcywgY2FwYWJpbGl0aWVzKSB7XG4gICAgLy8gVXNlIGEgY291bnRlciB0byBtYWtlIHN1cmUgZWFjaCBzZXNzaW9uIGhhcyBhIHVuaXF1ZSBpZFxuICAgIHRoaXMuc2Vzc2lvbklkID0gYGZha2VTZXNzaW9uXyR7dXRpbC51dWlkVjQoKX1gO1xuICAgIHJldHVybiBbdGhpcy5zZXNzaW9uSWQsIGNhcGFiaWxpdGllc107XG4gIH1cblxuICBhc3luYyBleGVjdXRlQ29tbWFuZCAoY21kLCAuLi5hcmdzKSB7XG4gICAgaWYgKCF0aGlzW2NtZF0pIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcnMuTm90WWV0SW1wbGVtZW50ZWRFcnJvcigpO1xuICAgIH1cbiAgICBpZiAoY21kID09PSAnY3JlYXRlU2Vzc2lvbicpIHtcbiAgICAgIHRoaXMucHJvdG9jb2wgPSBkZXRlcm1pbmVQcm90b2NvbChhcmdzKTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXNbY21kXSguLi5hcmdzKTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZVNlc3Npb24gKCkge1xuICAgIHRoaXMuandwUHJveHlBY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLnNlc3Npb25JZCA9IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXRTdGF0dXMgKCkge1xuICAgIHJldHVybiBcIkknbSBmaW5lXCI7XG4gIH1cblxuICBhc3luYyBzZXRVcmwgKHVybCkge1xuICAgIHJldHVybiBgTmF2aWdhdGVkIHRvOiAke3VybH1gO1xuICB9XG5cbiAgYXN5bmMgZ2V0VXJsICgpIHtcbiAgICByZXR1cm4gJ2h0dHA6Ly9mb29iYXIuY29tJztcbiAgfVxuXG4gIGFzeW5jIGJhY2sgKHNlc3Npb25JZCkge1xuICAgIHJldHVybiBzZXNzaW9uSWQ7XG4gIH1cblxuICBhc3luYyBmb3J3YXJkICgpIHt9XG5cbiAgYXN5bmMgcmVmcmVzaCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUb28gRnJlc2ghJyk7XG4gIH1cblxuICBhc3luYyBnZXRTZXNzaW9uICgpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vU3VjaERyaXZlckVycm9yKCk7XG4gIH1cblxuICBhc3luYyBjbGljayAoZWxlbWVudElkLCBzZXNzaW9uSWQpIHtcbiAgICByZXR1cm4gW2VsZW1lbnRJZCwgc2Vzc2lvbklkXTtcbiAgfVxuXG4gIGFzeW5jIGltcGxpY2l0V2FpdCAobXMpIHtcbiAgICByZXR1cm4gbXM7XG4gIH1cblxuICBhc3luYyBjbGlja0N1cnJlbnQgKGJ1dHRvbikge1xuICAgIHJldHVybiBidXR0b247XG4gIH1cblxuICBhc3luYyBzZXROZXR3b3JrQ29ubmVjdGlvbiAodHlwZSkge1xuICAgIHJldHVybiB0eXBlO1xuICB9XG5cbiAgYXN5bmMgbW92ZVRvIChlbGVtZW50LCB4T2Zmc2V0LCB5T2Zmc2V0KSB7XG4gICAgcmV0dXJuIFtlbGVtZW50LCB4T2Zmc2V0LCB5T2Zmc2V0XTtcbiAgfVxuXG4gIGFzeW5jIGdldFRleHQgKCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIGFzeW5jIGdldEF0dHJpYnV0ZSAoYXR0ciwgZWxlbWVudElkLCBzZXNzaW9uSWQpIHtcbiAgICByZXR1cm4gW2F0dHIsIGVsZW1lbnRJZCwgc2Vzc2lvbklkXTtcbiAgfVxuXG4gIGFzeW5jIHNldFZhbHVlICh2YWx1ZSwgZWxlbWVudElkKSB7XG4gICAgcmV0dXJuIFt2YWx1ZSwgZWxlbWVudElkXTtcbiAgfVxuXG4gIGFzeW5jIHBlcmZvcm1Ub3VjaCAoLi4uYXJncykge1xuICAgIHJldHVybiBhcmdzO1xuICB9XG5cbiAgYXN5bmMgc2V0RnJhbWUgKGZyYW1lSWQpIHtcbiAgICByZXR1cm4gZnJhbWVJZDtcbiAgfVxuXG4gIGFzeW5jIHJlbW92ZUFwcCAoYXBwKSB7XG4gICAgcmV0dXJuIGFwcDtcbiAgfVxuXG4gIGFzeW5jIHJlY2VpdmVBc3luY1Jlc3BvbnNlICgpIHtcbiAgICAvLyB0aGlzIGlzIGhlcmUgdG8gdGVzdCBhIGZhaWxpbmcgY29tbWFuZCB0aGF0IGRvZXMgbm90IHRocm93IGFuIGVycm9yXG4gICAgcmV0dXJuIHtzdGF0dXM6IDEzLCB2YWx1ZTogJ01pc2hhbmRsZWQgRHJpdmVyIEVycm9yJ307XG4gIH1cblxuICBwcm94eUFjdGl2ZSAoLypzZXNzaW9uSWQqLykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGdldFByb3h5QXZvaWRMaXN0ICgvKnNlc3Npb25JZCovKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgY2FuUHJveHkgKC8qc2Vzc2lvbklkKi8pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBhc3luYyBub3RQcm94aWVkQ29tbWFuZCAoKSB7XG4gICAgcmV0dXJuICdUaGlzIHdhcyBub3QgcHJveGllZCc7XG4gIH1cbn1cblxuZXhwb3J0IHsgRmFrZURyaXZlciB9O1xuIl19